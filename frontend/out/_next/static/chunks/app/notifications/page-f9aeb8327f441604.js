(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6173],{44400:(e,s,a)=>{Promise.resolve().then(a.bind(a,28224))},66889:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(67401).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},66462:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(67401).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},20853:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(67401).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},28224:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>R});var t=a(95155),r=a(12115),i=a(67401);let l=(0,i.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var n=a(98867),d=a(20853),c=a(35288),o=a(45686),x=a(66889),m=a(66462);let h=(0,i.A)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var u=a(73312),f=a(22130),p=a(25121),g=a(33900),y=a(70488),j=a(98986),b=a(37528),N=a(50959),v=a(17146),w=a(71714),E=a(25683),C=a(67427),k=a(1649),_=a(47548),A=a(4370);function R(){let{user:e}=(0,v.A)(),{notifications:s,preferences:a,summary:i,loading:R,markAsRead:O,markAllAsRead:I,deleteNotification:T,updatePreferences:D,clearOldNotifications:F}=(0,N.E)(),[L,P]=(0,r.useState)(""),[U,q]=(0,r.useState)("all"),[M,S]=(0,r.useState)("all"),[V,W]=(0,r.useState)(!1),[B,J]=(0,r.useState)(!1),z=s.filter(e=>{let s=e.title.toLowerCase().includes(L.toLowerCase())||e.message.toLowerCase().includes(L.toLowerCase()),a="all"===U||e.type===U,t="all"===M||"read"===M&&e.is_read||"unread"===M&&!e.is_read;return s&&a&&t}),G=async()=>{await I()},K=async()=>{J(!0);try{let e=await F();console.log("Cleared ".concat(e," old notifications"))}finally{J(!1)}},Y=e=>{switch(e){case"EVENT_CREATED":case"CATEGORY_UPDATE":return"\uD83C\uDF89";case"EVENT_REMINDER":case"BOOKING_REMINDER":return"⏰";case"BOOKING_CONFIRMED":return"✅";case"FOLLOW_UPDATE":return"\uD83D\uDC65";default:return"\uD83D\uDCE2"}},$=e=>{switch(e){case"EVENT_REMINDER":case"BOOKING_REMINDER":return"bg-orange-100 text-orange-800 border-orange-200";case"BOOKING_CONFIRMED":return"bg-green-100 text-green-800 border-green-200";case"FOLLOW_UPDATE":return"bg-blue-100 text-blue-800 border-blue-200";case"EVENT_CREATED":case"CATEGORY_UPDATE":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e?(0,t.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,t.jsx)(_.A,{user:e?{role:"USER"===e.role?"customer":e.role}:null}),(0,t.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(w.P.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Notifications"}),(0,t.jsx)("p",{className:"text-gray-600",children:i?"".concat(i.total_notifications," total notifications"):"Loading..."})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(u.$,{variant:"outline",size:"sm",onClick:()=>W(!V),children:[(0,t.jsx)(l,{className:"w-4 h-4 mr-2"}),"Preferences"]}),(0,t.jsxs)(u.$,{variant:"outline",size:"sm",onClick:G,disabled:0===s.filter(e=>!e.is_read).length,children:[(0,t.jsx)(n.A,{className:"w-4 h-4 mr-2"}),"Mark all read"]})]})]})}),(0,t.jsx)(w.P.div,{className:"mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:(0,t.jsx)(C.Wq,{className:"bg-white border border-gray-200 rounded-xl p-4",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,t.jsx)(g.p,{placeholder:"Search notifications...",value:L,onChange:e=>P(e.target.value),className:"pl-10"})]})}),(0,t.jsxs)(b.l6,{value:U,onValueChange:q,children:[(0,t.jsx)(b.bq,{children:(0,t.jsx)(b.yv,{placeholder:"Filter by type"})}),(0,t.jsxs)(b.gC,{children:[(0,t.jsx)(b.eb,{value:"all",children:"All Types"}),(0,t.jsx)(b.eb,{value:"EVENT_CREATED",children:"Event Created"}),(0,t.jsx)(b.eb,{value:"EVENT_REMINDER",children:"Event Reminder"}),(0,t.jsx)(b.eb,{value:"BOOKING_CONFIRMED",children:"Booking Confirmed"}),(0,t.jsx)(b.eb,{value:"BOOKING_REMINDER",children:"Booking Reminder"}),(0,t.jsx)(b.eb,{value:"FOLLOW_UPDATE",children:"Follow Update"}),(0,t.jsx)(b.eb,{value:"CATEGORY_UPDATE",children:"Category Update"})]})]}),(0,t.jsxs)(b.l6,{value:M,onValueChange:S,children:[(0,t.jsx)(b.bq,{children:(0,t.jsx)(b.yv,{placeholder:"Filter by status"})}),(0,t.jsxs)(b.gC,{children:[(0,t.jsx)(b.eb,{value:"all",children:"All Status"}),(0,t.jsx)(b.eb,{value:"unread",children:"Unread"}),(0,t.jsx)(b.eb,{value:"read",children:"Read"})]})]})]})})}),(0,t.jsx)(w.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:R?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-gray-300 border-t-blue-600 rounded-full animate-spin"})}):0===z.length?(0,t.jsxs)(C.Wq,{className:"bg-white border border-gray-200 rounded-xl p-8 text-center",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,children:[(0,t.jsx)(c.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications found"}),(0,t.jsx)("p",{className:"text-gray-500",children:L||"all"!==U||"all"!==M?"Try adjusting your search or filters.":"You're all caught up! No notifications yet."})]}):(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsx)(E.N,{children:z.map((e,s)=>(0,t.jsx)(w.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.05*s},children:(0,t.jsx)(C.Wq,{className:"border rounded-xl cursor-pointer transition-colors ".concat(e.is_read?"bg-gray-50 border-gray-200":"bg-white border-blue-500 shadow-sm"),shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,children:(0,t.jsx)("div",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,t.jsx)("div",{className:"text-2xl",children:Y(e.type)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsx)("h4",{className:"text-sm font-medium ".concat(e.is_read?"text-gray-600":"text-gray-900"),children:e.title}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,t.jsx)(u.$,{variant:"ghost",size:"sm",onClick:()=>O(e.id),className:"h-8 w-8 p-0",children:(0,t.jsx)(n.A,{className:"w-4 h-4"})}),(0,t.jsx)(u.$,{variant:"ghost",size:"sm",onClick:()=>T(e.id),className:"h-8 w-8 p-0 text-red-500 hover:text-red-700",children:(0,t.jsx)(o.A,{className:"w-4 h-4"})})]})]}),(0,t.jsx)("p",{className:"text-sm mt-2 ".concat(e.is_read?"text-gray-500":"text-gray-700"),children:e.message}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,t.jsx)(p.E,{variant:"outline",className:"text-xs ".concat($(e.type)),children:e.type.replace("_"," ").toLowerCase()}),(0,t.jsxs)("span",{className:"text-xs text-gray-400 flex items-center",children:[(0,t.jsx)(x.A,{className:"w-3 h-3 mr-1"}),(0,k.m)(new Date(e.created_at),{addSuffix:!0})]})]})]})]})})})},e.id))})})})]}),(0,t.jsxs)("div",{className:"lg:w-80",children:[(0,t.jsx)(w.P.div,{className:"mb-6",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},children:(0,t.jsxs)(C.Wq,{className:"bg-white border border-gray-200 rounded-xl p-6",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Notification Stats"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Total"}),(0,t.jsx)(p.E,{variant:"outline",children:(null==i?void 0:i.total_notifications)||0})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Unread"}),(0,t.jsx)(p.E,{variant:"destructive",children:(null==i?void 0:i.unread_count)||0})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Reminders"}),(0,t.jsx)(p.E,{variant:"outline",className:"bg-orange-100 text-orange-800 border-orange-200",children:(null==i?void 0:i.reminder_count)||0})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Bookings"}),(0,t.jsx)(p.E,{variant:"outline",className:"bg-green-100 text-green-800 border-green-200",children:(null==i?void 0:i.booking_count)||0})]})]})]})}),(0,t.jsx)(E.N,{children:V&&(0,t.jsx)(w.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},children:(0,t.jsxs)(C.Wq,{className:"bg-white border border-gray-200 rounded-xl p-6 mb-6",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Notification Preferences"}),a&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(m.A,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)(j.J,{htmlFor:"email-notifications",className:"text-sm",children:"Email Notifications"})]}),(0,t.jsx)(y.d,{id:"email-notifications",checked:a.email_notifications,onCheckedChange:e=>D({email_notifications:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)(j.J,{htmlFor:"push-notifications",className:"text-sm",children:"Push Notifications"})]}),(0,t.jsx)(y.d,{id:"push-notifications",checked:a.push_notifications,onCheckedChange:e=>D({push_notifications:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(j.J,{htmlFor:"event-reminders",className:"text-sm",children:"Event Reminders"}),(0,t.jsx)(y.d,{id:"event-reminders",checked:a.event_reminders,onCheckedChange:e=>D({event_reminders:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(j.J,{htmlFor:"booking-reminders",className:"text-sm",children:"Booking Reminders"}),(0,t.jsx)(y.d,{id:"booking-reminders",checked:a.booking_reminders,onCheckedChange:e=>D({booking_reminders:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(j.J,{htmlFor:"follow-updates",className:"text-sm",children:"Follow Updates"}),(0,t.jsx)(y.d,{id:"follow-updates",checked:a.follow_updates,onCheckedChange:e=>D({follow_updates:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(j.J,{htmlFor:"category-updates",className:"text-sm",children:"Category Updates"}),(0,t.jsx)(y.d,{id:"category-updates",checked:a.category_updates,onCheckedChange:e=>D({category_updates:e})})]})]})]})})}),(0,t.jsx)(w.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},children:(0,t.jsxs)(C.Wq,{className:"bg-white border border-gray-200 rounded-xl p-6",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Actions"}),(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsxs)(u.$,{variant:"outline",size:"sm",onClick:K,disabled:B,className:"w-full",children:[B?(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin mr-2"}):(0,t.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Clear Old Notifications"]})})]})})]})]})}),(0,t.jsx)(A.A,{})]}):(0,t.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,t.jsx)(_.A,{user:e?{role:"USER"===e.role?"customer":e.role}:null}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)(f.Zp,{children:(0,t.jsx)(f.Wu,{className:"p-6",children:(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:"Please log in to view notifications."})})})}),(0,t.jsx)(A.A,{})]})}},33900:(e,s,a)=>{"use strict";a.d(s,{p:()=>l});var t=a(95155),r=a(12115),i=a(21567);let l=r.forwardRef((e,s)=>{let{className:a,type:r,...l}=e;return(0,t.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...l})});l.displayName="Input"},98986:(e,s,a)=>{"use strict";a.d(s,{J:()=>c});var t=a(95155),r=a(12115),i=a(39402),l=a(31027),n=a(21567);let d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.b,{ref:s,className:(0,n.cn)(d(),a),...r})});c.displayName=i.b.displayName},37528:(e,s,a)=>{"use strict";a.d(s,{bq:()=>x,eb:()=>h,gC:()=>m,l6:()=>c,yv:()=>o});var t=a(95155),r=a(12115),i=a(64605),l=a(51719),n=a(98867),d=a(21567);let c=i.bL;i.YJ;let o=i.WT,x=r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,t.jsxs)(i.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...n,children:[r,(0,t.jsx)(i.In,{asChild:!0,children:(0,t.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=i.l9.displayName;let m=r.forwardRef((e,s)=>{let{className:a,children:r,position:l="popper",...n}=e;return(0,t.jsx)(i.ZL,{children:(0,t.jsx)(i.UC,{ref:s,className:(0,d.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===l&&"translate-y-1",a),position:l,...n,children:(0,t.jsx)(i.LM,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r})})})});m.displayName=i.UC.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.JU,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=i.JU.displayName;let h=r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(i.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(i.VF,{children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})}),(0,t.jsx)(i.p4,{children:r})]})});h.displayName=i.q7.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=i.wv.displayName},70488:(e,s,a)=>{"use strict";a.d(s,{d:()=>n});var t=a(95155),r=a(12115),i=a(78236),l=a(21567);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.bL,{className:(0,l.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:s,children:(0,t.jsx)(i.zi,{className:(0,l.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});n.displayName=i.bL.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[1181,6232,3081,2809,7506,8472,5775,7939,4934,8455,975,8441,1517,7358],()=>s(44400)),_N_E=e.O()}]);