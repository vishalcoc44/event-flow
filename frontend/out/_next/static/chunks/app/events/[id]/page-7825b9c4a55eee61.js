(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6336],{19425:(e,t,s)=>{Promise.resolve().then(s.bind(s,33501))},87364:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},32423:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},73239:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},66889:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},14807:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},57223:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},26764:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},70865:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},33501:(e,t,s)=>{"use strict";s.d(t,{default:()=>J});var a=s(95155),r=s(12115),l=s(76046),i=s(48173),n=s.n(i),d=s(47548),c=s(4370),o=s(73312),m=s(22130),x=s(25121),h=s(17146),u=s(98470),p=s(56345),f=s(71714),v=s(87364),y=s(32423),j=s(66889),g=s(57223),N=s(14807),b=s(67401);let w=(0,b.A)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);var k=s(78972),C=s(7223),A=s(33900),E=s(46754),D=s(98986),S=s(51344),R=s(37528),_=s(70865),M=s(73239),T=s(26764),L=s(45686);let O=(0,b.A)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),I=(0,b.A)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),P=(0,b.A)("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]),F=(0,b.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),$=(0,b.A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var z=s(25683),V=s(67427);let B=e=>{let{rating:t,onRatingChange:s,readonly:r=!1,size:l="md"}=e,i={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return(0,a.jsx)("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>!r&&(null==s?void 0:s(e)),disabled:r,className:"transition-colors ".concat(r?"cursor-default":"cursor-pointer hover:scale-110"),children:(0,a.jsx)(_.A,{className:"".concat(i[l]," ").concat(e<=t?"fill-yellow-400 text-yellow-400":"text-gray-300")})},e))})},Y=e=>{let{eventId:t,eventTitle:s,onSuccess:l,onCancel:i,existingReview:n,userBookings:d=[]}=e,{addReview:c,updateReview:x}=(0,k.v)(),{toast:h}=(0,C.dj)(),[u,p]=(0,r.useState)((null==n?void 0:n.rating)||0),[f,v]=(0,r.useState)((null==n?void 0:n.title)||""),[y,j]=(0,r.useState)((null==n?void 0:n.comment)||""),g=d.filter(e=>"CONFIRMED"===e.status),[N,b]=(0,r.useState)((null==n?void 0:n.is_verified)||g.length>0),[w,S]=(0,r.useState)(!1),R=async e=>{if(e.preventDefault(),0===u){h({title:"Rating Required",description:"Please select a rating before submitting.",variant:"destructive"});return}try{S(!0),n?(await x(n.id,u,f,y),h({title:"Review Updated",description:"Your review has been updated successfully."})):(await c(t,u,f,y,N),h({title:"Review Added",description:"Your review has been added successfully."})),l()}catch(e){h({title:"Error",description:e.message||"Failed to save review.",variant:"destructive"})}finally{S(!1)}};return(0,a.jsxs)(m.Zp,{className:"w-full max-w-2xl mx-auto",children:[(0,a.jsx)(m.aR,{children:(0,a.jsxs)(m.ZB,{className:"flex items-center gap-2",children:[n?"Edit Review":"Write a Review",N&&(0,a.jsx)(M.A,{className:"w-5 h-5 text-green-500"})]})}),(0,a.jsx)(m.Wu,{children:(0,a.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D.J,{children:"Rating *"}),(0,a.jsx)(B,{rating:u,onRatingChange:p})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D.J,{htmlFor:"title",children:"Review Title"}),(0,a.jsx)(A.p,{id:"title",value:f,onChange:e=>v(e.target.value),placeholder:"Summarize your experience",maxLength:255})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D.J,{htmlFor:"comment",children:"Review Comment"}),(0,a.jsx)(E.T,{id:"comment",value:y,onChange:e=>j(e.target.value),placeholder:"Share your detailed experience...",rows:4})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"verified",checked:N,onChange:e=>b(e.target.checked),disabled:g.length>0,className:"rounded"}),(0,a.jsx)(D.J,{htmlFor:"verified",className:"text-sm",children:g.length>0?"✓ Verified attendee (you have a confirmed booking)":"I attended this event"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)(o.$,{type:"button",variant:"outline",onClick:i,children:"Cancel"}),(0,a.jsx)(o.$,{type:"submit",disabled:w||0===u,children:w?"Saving...":n?"Update Review":"Submit Review"})]})]})})]})},q=e=>{let{review:t,onVoteHelpful:s,onReport:l,onEdit:i,onDelete:n,isOwner:d}=e,[c,m]=(0,r.useState)(!1),[h,u]=(0,r.useState)(""),[p,v]=(0,r.useState)(!1);return(0,a.jsxs)(f.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"border rounded-lg p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-semibold text-primary",children:t.username.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:t.username}),t.is_verified&&(0,a.jsxs)(x.E,{variant:"secondary",className:"text-xs",children:[(0,a.jsx)(M.A,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(B,{rating:t.rating,readonly:!0,size:"sm"}),(0,a.jsx)("span",{children:new Date(t.created_at).toLocaleDateString()})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>i(t),className:"h-8 w-8 p-0",children:(0,a.jsx)(T.A,{className:"w-4 h-4"})}),(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>v(!0),className:"h-8 w-8 p-0 text-red-500 hover:text-red-700",children:(0,a.jsx)(L.A,{className:"w-4 h-4"})})]}),(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>m(!0),className:"h-8 w-8 p-0",children:(0,a.jsx)(O,{className:"w-4 h-4"})})]})]}),t.title&&(0,a.jsx)("h4",{className:"font-semibold text-lg",children:t.title}),t.comment&&(0,a.jsx)("p",{className:"text-gray-700 leading-relaxed",children:t.comment}),(0,a.jsx)("div",{className:"flex items-center justify-between pt-2 border-t",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(o.$,{variant:"ghost",size:"sm",onClick:()=>s(t.id,!0),disabled:!1===t.user_helpful_vote,className:"flex items-center gap-1 ".concat(!0===t.user_helpful_vote?"text-green-600 bg-green-50 hover:bg-green-100":!1===t.user_helpful_vote?"text-gray-400 cursor-not-allowed":"hover:text-green-600"),children:[(0,a.jsx)(I,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:t.helpful_votes_count||0})]}),(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>s(t.id,!1),disabled:!0===t.user_helpful_vote,className:"flex items-center gap-1 ".concat(!1===t.user_helpful_vote?"text-red-600 bg-red-50 hover:bg-red-100":!0===t.user_helpful_vote?"text-gray-400 cursor-not-allowed":"hover:text-red-600"),children:(0,a.jsx)(P,{className:"w-4 h-4"})})]})}),(0,a.jsx)(S.lG,{open:c,onOpenChange:m,children:(0,a.jsxs)(S.Cf,{children:[(0,a.jsx)(S.c7,{children:(0,a.jsx)(S.L3,{children:"Report Review"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(D.J,{children:"Reason for reporting"}),(0,a.jsxs)(R.l6,{value:h,onValueChange:u,children:[(0,a.jsx)(R.bq,{children:(0,a.jsx)(R.yv,{placeholder:"Select a reason"})}),(0,a.jsxs)(R.gC,{children:[(0,a.jsx)(R.eb,{value:"INAPPROPRIATE",children:"Inappropriate content"}),(0,a.jsx)(R.eb,{value:"SPAM",children:"Spam"}),(0,a.jsx)(R.eb,{value:"FAKE",children:"Fake review"}),(0,a.jsx)(R.eb,{value:"OFFENSIVE",children:"Offensive language"}),(0,a.jsx)(R.eb,{value:"OTHER",children:"Other"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(o.$,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),(0,a.jsx)(o.$,{onClick:()=>{h&&(l(t.id,h),m(!1),u(""))},disabled:!h,children:"Report"})]})]})]})}),(0,a.jsx)(S.lG,{open:p,onOpenChange:v,children:(0,a.jsxs)(S.Cf,{children:[(0,a.jsx)(S.c7,{children:(0,a.jsx)(S.L3,{children:"Delete Review"})}),(0,a.jsx)("p",{children:"Are you sure you want to delete your review? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(o.$,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),(0,a.jsx)(o.$,{variant:"destructive",onClick:()=>{n(t.id),v(!1)},children:"Delete"})]})]})})]})},U=e=>{let{summary:t}=e;if(!t)return null;let s=t.total_reviews,r=t.average_rating||0,l=e=>s>0?Math.round(e/s*100):0;return(0,a.jsx)(m.Zp,{className:"mb-6",children:(0,a.jsx)(m.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-primary",children:r.toFixed(1)}),(0,a.jsx)(B,{rating:Math.round(r),readonly:!0,size:"lg"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 mt-2",children:["Based on ",s," review",1!==s?"s":""]})]}),(0,a.jsx)("div",{className:"col-span-2 space-y-2",children:[5,4,3,2,1].map(e=>{let s=t["".concat(e,"_star_count")]||0,r=l(s);return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 w-12",children:[(0,a.jsx)("span",{className:"text-sm",children:e}),(0,a.jsx)(_.A,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]}),(0,a.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-300",style:{width:"".concat(r,"%")}})}),(0,a.jsx)("div",{className:"w-12 text-sm text-gray-500",children:s})]},e)})})]})})})},W=e=>{let{eventId:t,eventTitle:s,eventDate:l,userBookings:i=[]}=e,{reviews:n,ratingSummary:d,loading:c,error:m,loadEventReviews:x,loadEventRatingSummary:u,voteHelpful:p,reportReview:f,deleteReview:v,canReviewEvent:y,getUserReview:j}=(0,k.v)(),{user:g}=(0,h.A)(),{toast:N}=(0,C.dj)(),[b,w]=(0,r.useState)(!1),[A,E]=(0,r.useState)(null),[M,T]=(0,r.useState)("created_at"),[L,O]=(0,r.useState)("DESC");(0,r.useEffect)(()=>{x(t),u(t)},[t]);let I=async(e,t)=>{try{let s=n.find(t=>t.id===e),a=null==s?void 0:s.user_helpful_vote;await p(e,t),a===t?N({title:"Vote Removed",description:"Your vote has been removed."}):N({title:"Vote Recorded",description:"Marked review as ".concat(t?"helpful":"not helpful",".")})}catch(e){N({title:"Error",description:e.message||"Failed to record vote.",variant:"destructive"})}},P=async(e,t)=>{try{await f(e,t),N({title:"Review Reported",description:"Thank you for your report. We'll review it shortly."})}catch(e){N({title:"Error",description:e.message||"Failed to report review.",variant:"destructive"})}},B=async e=>{try{await v(e),N({title:"Review Deleted",description:"Your review has been deleted successfully."})}catch(e){N({title:"Error",description:e.message||"Failed to delete review.",variant:"destructive"})}},W=e=>{E(e),w(!0)},J=j(t),H=()=>{if(!g||J)return!1;let e=i.filter(e=>"CONFIRMED"===e.status).length>0;if(!e||!l)return!1;let t=new Date(l),s=new Date;return e&&t<s};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(U,{summary:d}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[g&&H()&&(0,a.jsx)(V.Wq,{className:"cursor-pointer",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,hoverScale:1.02,hoverLift:-1,transitionDuration:150,children:(0,a.jsx)(o.$,{onClick:()=>w(!0),children:"Write a Review"})}),J&&(0,a.jsx)(V.Wq,{className:"cursor-pointer",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,hoverScale:1.02,hoverLift:-1,transitionDuration:150,children:(0,a.jsx)(o.$,{variant:"outline",onClick:()=>W(J),children:"Edit Your Review"})}),g&&!H()&&!J&&(0,a.jsxs)("div",{className:"text-sm text-gray-600 bg-gray-50 px-3 py-2 rounded-md border",children:[(0,a.jsx)(F,{className:"w-4 h-4 inline mr-1"}),(()=>{if(!g)return"Please log in to write a review.";if(J)return"You have already reviewed this event.";let e=i.filter(e=>"CONFIRMED"===e.status),t=i.filter(e=>"CANCELLED"===e.status);return 0===i.length?"You must book this event before you can review it.":0===e.length&&t.length>0?"You cannot review this event because your booking was cancelled.":0===e.length?"You must have a confirmed booking for this event to review it.":l?new Date(l)>=new Date?"You can only review this event after it has taken place.":null:"Event date information is not available."})()]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(D.J,{className:"text-sm",children:"Sort by:"}),(0,a.jsxs)(R.l6,{value:M,onValueChange:T,children:[(0,a.jsx)(R.bq,{className:"w-32",children:(0,a.jsx)(R.yv,{})}),(0,a.jsxs)(R.gC,{children:[(0,a.jsx)(R.eb,{value:"created_at",children:"Date"}),(0,a.jsx)(R.eb,{value:"rating",children:"Rating"}),(0,a.jsx)(R.eb,{value:"helpful",children:"Helpful"}),(0,a.jsx)(R.eb,{value:"verified",children:"Verified"})]})]}),(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>O("DESC"===L?"ASC":"DESC"),children:"DESC"===L?"↓":"↑"})]})]}),(0,a.jsx)(S.lG,{open:b,onOpenChange:w,children:(0,a.jsxs)(S.Cf,{className:"max-w-2xl",children:[(0,a.jsx)(S.L3,{className:"text-xl font-semibold mb-4",children:A?"Edit Your Review":"Write a Review"}),(0,a.jsx)(Y,{eventId:t,eventTitle:s,onSuccess:()=>{w(!1),E(null),x(t),u(t)},onCancel:()=>{w(!1),E(null)},existingReview:A,userBookings:i})]})}),(0,a.jsx)("div",{className:"space-y-4",children:c?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-t-primary rounded-full animate-spin"})}):m?(0,a.jsxs)("div",{className:"text-center py-8 text-red-500",children:[(0,a.jsx)($,{className:"w-8 h-8 mx-auto mb-2"}),m]}):0===n.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(_.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No reviews yet"}),(0,a.jsx)("p",{children:"Be the first to review this event!"})]}):(0,a.jsx)(z.N,{children:n.map(e=>(0,a.jsx)(q,{review:e,onVoteHelpful:I,onReport:P,onEdit:W,onDelete:B,isOwner:(null==g?void 0:g.id)===e.user_id},e.id))})})]})};function J(){let e=(0,l.useParams)();(0,l.useRouter)();let{user:t}=(0,h.A)(),{events:s,loading:i}=(0,u.L)(),{bookings:b}=(0,p.W)(),[k,C]=(0,r.useState)(null),[A,E]=(0,r.useState)(!1),[D,S]=(0,r.useState)([]);if((0,r.useEffect)(()=>{if(e.id&&s){let t=s.find(t=>t.id===e.id);t&&C(t)}},[e.id,s]),(0,r.useEffect)(()=>{if(t&&b&&k){let e=b.filter(e=>{var s;return e.user_id===t.id&&(null===(s=e.event)||void 0===s?void 0:s.id)===k.id});S(e),E(e.filter(e=>"CONFIRMED"===e.status).length>0)}},[t,b,k]),i)return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,a.jsx)(d.A,{}),(0,a.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8",children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(f.P.div,{className:"w-12 h-12 border-4 border-t-[#6CDAEC] rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})})}),(0,a.jsx)(c.A,{})]});if(!k)return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,a.jsx)(d.A,{}),(0,a.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Event Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"The event you're looking for doesn't exist or has been removed."}),(0,a.jsx)(n(),{href:"/events",children:(0,a.jsx)(o.$,{children:"Back to Events"})})]})}),(0,a.jsx)(c.A,{})]});let R=new Date(k.date),_=R<new Date;return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,a.jsx)(d.A,{}),(0,a.jsxs)("main",{className:"flex-grow container mx-auto px-4 py-8",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(n(),{href:"/events",children:(0,a.jsxs)(o.$,{variant:"outline",size:"sm",className:"flex items-center",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Back to Events"]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)(f.P.div,{className:"lg:col-span-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,a.jsxs)(m.Zp,{className:"overflow-hidden border border-gray-200 shadow-sm",children:[(0,a.jsxs)("div",{className:"relative h-96",children:[(0,a.jsx)("img",{src:k.image_url||"https://via.placeholder.com/800x400?text=Event",alt:k.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/800x400?text=Event"}}),k.categories&&(0,a.jsx)("div",{className:"absolute top-4 left-4",children:(0,a.jsx)(x.E,{className:"bg-[#6CDAEC] text-white",children:k.categories.name})}),_&&(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsx)(x.E,{className:"bg-gray-500 text-white",children:"Past Event"})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:k.title}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,a.jsx)(y.A,{className:"h-5 w-5 mr-3 text-[#6CDAEC]"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"Date"}),(0,a.jsx)("div",{children:R.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,a.jsx)(j.A,{className:"h-5 w-5 mr-3 text-[#6CDAEC]"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"Time"}),(0,a.jsx)("div",{children:k.time})]})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,a.jsx)(g.A,{className:"h-5 w-5 mr-3 text-[#6CDAEC]"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"Location"}),(0,a.jsx)("div",{children:k.location||"Location TBD"})]})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,a.jsx)(N.A,{className:"h-5 w-5 mr-3 text-[#6CDAEC]"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"Price"}),(0,a.jsx)("div",{children:0===k.price?"Free":"$".concat(k.price)})]})]})]}),k.description&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"About This Event"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed whitespace-pre-wrap",children:k.description})]}),k.created_at&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Event created on ",new Date(k.created_at).toLocaleDateString()]})]})]})}),(0,a.jsx)(f.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:(0,a.jsxs)(m.Zp,{className:"p-6 border border-gray-200 shadow-sm sticky top-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Event Details"}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Price per ticket:"}),(0,a.jsx)("span",{className:"font-semibold text-lg",children:0===k.price?"Free":"$".concat(k.price)})]}),A&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(w,{className:"h-5 w-5 text-green-600 mr-2"}),(0,a.jsx)("span",{className:"font-medium text-green-800",children:"You're Booked!"})]}),(0,a.jsxs)("p",{className:"text-green-700 text-sm",children:["You have ",D.filter(e=>"CONFIRMED"===e.status).length," confirmed ticket(s) for this event"]})]}),D.some(e=>"CANCELLED"===e.status)&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(w,{className:"h-5 w-5 text-red-600 mr-2"}),(0,a.jsx)("span",{className:"font-medium text-red-800",children:"Booking Cancelled"})]}),(0,a.jsxs)("p",{className:"text-red-700 text-sm",children:["You previously had ",D.filter(e=>"CANCELLED"===e.status).length," cancelled ticket(s) for this event"]})]}),_&&(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(w,{className:"h-5 w-5 text-gray-600 mr-2"}),(0,a.jsx)("span",{className:"font-medium text-gray-800",children:"Past Event"})]}),(0,a.jsx)("p",{className:"text-gray-700 text-sm",children:"This event has already taken place"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[!_&&!A&&(0,a.jsx)(n(),{href:"/customer/book-event/".concat(k.id),className:"w-full",children:(0,a.jsx)(o.$,{className:"w-full bg-[#6CDAEC] hover:bg-[#5BC8D9]",children:"Book Tickets"})}),A&&(0,a.jsx)(n(),{href:"/customer/bookings",className:"w-full",children:(0,a.jsx)(o.$,{variant:"outline",className:"w-full",children:"View My Bookings"})}),D.some(e=>"CANCELLED"===e.status)&&!A&&(0,a.jsx)(n(),{href:"/customer/book-event/".concat(k.id),className:"w-full",children:(0,a.jsx)(o.$,{className:"w-full bg-[#6CDAEC] hover:bg-[#5BC8D9]",children:"Rebook Tickets"})}),(0,a.jsx)(n(),{href:"/events",className:"w-full",children:(0,a.jsx)(o.$,{variant:"outline",className:"w-full",children:"Browse More Events"})})]}),(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Event Information"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,a.jsx)("p",{children:"• Please arrive 15 minutes before the event starts"}),(0,a.jsx)("p",{children:"• Bring your booking confirmation"}),(0,a.jsx)("p",{children:"• Contact us if you have any questions"})]})]})]})})]}),(0,a.jsx)(f.P.div,{className:"mt-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:(0,a.jsx)(W,{eventId:k.id,eventTitle:k.title,eventDate:k.date,userBookings:D})})]}),(0,a.jsx)(c.A,{})]})}},51344:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>x,Es:()=>u,L3:()=>p,c7:()=>h,lG:()=>d,rr:()=>f,zM:()=>c});var a=s(95155),r=s(12115),l=s(84290),i=s(40767),n=s(21567);let d=l.bL,c=l.l9,o=e=>{let{className:t,...s}=e;return(0,a.jsx)(l.ZL,{...s,children:(0,a.jsx)("div",{className:(0,n.cn)(t),children:s.children})})};o.displayName=l.ZL.displayName;let m=(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.hJ,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});m.displayName=l.hJ.displayName;let x=(0,r.forwardRef)((e,t)=>{let{className:s,children:r,...d}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(l.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",s),...d,children:[r,(0,a.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=l.UC.displayName;let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};h.displayName="DialogHeader";let u=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};u.displayName="DialogFooter";let p=(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});p.displayName=l.hE.displayName;let f=(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});f.displayName=l.VY.displayName},33900:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(95155),r=s(12115),l=s(21567);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},98986:(e,t,s)=>{"use strict";s.d(t,{J:()=>c});var a=s(95155),r=s(12115),l=s(39402),i=s(31027),n=s(21567);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.b,{ref:t,className:(0,n.cn)(d(),s),...r})});c.displayName=l.b.displayName},37528:(e,t,s)=>{"use strict";s.d(t,{bq:()=>m,eb:()=>h,gC:()=>x,l6:()=>c,yv:()=>o});var a=s(95155),r=s(12115),l=s(64605),i=s(51719),n=s(98867),d=s(21567);let c=l.bL;l.YJ;let o=l.WT,m=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(l.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...n,children:[r,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.l9.displayName;let x=r.forwardRef((e,t)=>{let{className:s,children:r,position:i="popper",...n}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{ref:t,className:(0,d.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===i&&"translate-y-1",s),position:i,...n,children:(0,a.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r})})})});x.displayName=l.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=l.JU.displayName;let h=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(l.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:r})]})});h.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=l.wv.displayName},46754:(e,t,s)=>{"use strict";s.d(t,{T:()=>i});var a=s(95155),r=s(12115),l=s(21567);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});i.displayName="Textarea"},7223:(e,t,s)=>{"use strict";s.d(t,{dj:()=>x,oR:()=>m});var a=s(12115);let r=0,l=new Map,i=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function o(e){c=n(c,e),d.forEach(e=>{e(c)})}function m(e){let{...t}=e,s=(r=(r+1)%Number.MAX_VALUE).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:s});return o({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function x(){let[e,t]=a.useState(c);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},39402:(e,t,s)=>{"use strict";s.d(t,{b:()=>o});var a=s(12115);function r(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}s(47650);var l=s(95155),i=Symbol("radix.slottable");function n(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===i}var d=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let s=function(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:s,...l}=e;if(a.isValidElement(s)){let e,i;let n=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.props.ref:s.props.ref||s.ref,d=function(e,t){let s={...t};for(let a in t){let r=e[a],l=t[a];/^on[A-Z]/.test(a)?r&&l?s[a]=(...e)=>{let t=l(...e);return r(...e),t}:r&&(s[a]=r):"style"===a?s[a]={...r,...l}:"className"===a&&(s[a]=[r,l].filter(Boolean).join(" "))}return{...e,...s}}(l,s.props);return s.type!==a.Fragment&&(d.ref=t?function(...e){return t=>{let s=!1,a=e.map(e=>{let a=r(e,t);return s||"function"!=typeof a||(s=!0),a});if(s)return()=>{for(let t=0;t<a.length;t++){let s=a[t];"function"==typeof s?s():r(e[t],null)}}}}(t,n):n),a.cloneElement(s,d)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=a.forwardRef((e,s)=>{let{children:r,...i}=e,d=a.Children.toArray(r),c=d.find(n);if(c){let e=c.props.children,r=d.map(t=>t!==c?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,l.jsx)(t,{...i,ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,r):null})}return(0,l.jsx)(t,{...i,ref:s,children:r})});return s.displayName=`${e}.Slot`,s}(`Primitive.${t}`),i=a.forwardRef((e,a)=>{let{asChild:r,...i}=e,n=r?s:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(n,{...i,ref:a})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),c=a.forwardRef((e,t)=>(0,l.jsx)(d.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));c.displayName="Label";var o=c}},e=>{var t=t=>e(e.s=t);e.O(0,[1181,6232,3081,2809,7506,8472,5775,4290,4934,8455,975,5534,1347,8441,1517,7358],()=>t(19425)),_N_E=e.O()}]);