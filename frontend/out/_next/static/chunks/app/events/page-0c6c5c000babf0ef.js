(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8634],{30023:(e,t,s)=>{Promise.resolve().then(s.bind(s,25431))},32423:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},66889:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},14807:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},57223:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},20853:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},70865:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},25431:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var a=s(95155),r=s(12115),l=s(48173),i=s.n(l),n=s(47548),o=s(4370),c=s(73312),d=s(22130),u=s(33900),m=s(25121),x=s(17146),h=s(98470),g=s(56345),v=s(71714),p=s(20853),y=s(32423),f=s(66889),j=s(57223),b=s(14807),w=s(67427),N=s(92214);function k(){let{user:e}=(0,x.A)(),{events:t,loading:s}=(0,h.L)(),{bookings:l}=(0,g.W)(),[k,C]=(0,r.useState)(""),[E,A]=(0,r.useState)("all"),[B,S]=(0,r.useState)("all"),[D,F]=(0,r.useState)([]);(0,r.useEffect)(()=>{e&&l&&F(l.filter(t=>t.user_id===e.id&&"CONFIRMED"===t.status).map(e=>{var t;return null===(t=e.event)||void 0===t?void 0:t.id}).filter(Boolean))},[e,l]);let L=t?[...new Set(t.map(e=>{var t;return null===(t=e.categories)||void 0===t?void 0:t.name}).filter(Boolean))]:[],P=(null==t?void 0:t.filter(e=>{var t,s,a;let r=e.title.toLowerCase().includes(k.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(k.toLowerCase()))||(null===(s=e.location)||void 0===s?void 0:s.toLowerCase().includes(k.toLowerCase())),l="all"===E||(null===(a=e.categories)||void 0===a?void 0:a.name)===E,i=!0;return"free"===B?i=0===e.price:"low"===B?i=e.price>0&&e.price<=50:"medium"===B?i=e.price>50&&e.price<=200:"high"===B&&(i=e.price>200),r&&l&&i}))||[];return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,a.jsx)(n.A,{user:e?{role:"USER"===e.role?"customer":e.role}:null}),(0,a.jsxs)("main",{className:"flex-grow container mx-auto px-4 py-8",children:[(0,a.jsxs)(v.P.div,{className:"mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Discover Events"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Find and book amazing events happening around you"})]}),(0,a.jsx)(v.P.div,{className:"mb-8",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.8,delay:.2},children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(u.p,{type:"text",placeholder:"Search events by title, description, or location...",className:"pl-10",value:k,onChange:e=>C(e.target.value)})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:E,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#6CDAEC] focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Categories"}),L.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:B,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#6CDAEC] focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Prices"}),(0,a.jsx)("option",{value:"free",children:"Free"}),(0,a.jsx)("option",{value:"low",children:"$1 - $50"}),(0,a.jsx)("option",{value:"medium",children:"$51 - $200"}),(0,a.jsx)("option",{value:"high",children:"$200+"})]})})]})}),(0,a.jsx)(v.P.div,{className:"mb-6",initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:.1},children:(0,a.jsx)("p",{className:"text-gray-600",children:s?"Loading events...":"".concat(P.length," event").concat(1!==P.length?"s":""," found")})}),s?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(v.P.div,{className:"w-12 h-12 border-4 border-t-[#6CDAEC] rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):0===P.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-4",children:(0,a.jsx)(y.A,{className:"h-12 w-12 mx-auto"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No events found"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:k||"all"!==E||"all"!==B?"Try adjusting your search criteria or filters.":"No events are currently available."}),(k||"all"!==E||"all"!==B)&&(0,a.jsx)(c.$,{onClick:()=>{C(""),A("all"),S("all")},children:"Clear Filters"})]}):(0,a.jsx)(v.P.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.8,delay:.2},children:P.map((e,t)=>{let s=D.includes(e.id);return(0,a.jsx)(v.P.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.1*t},whileHover:{scale:1.02,transition:{duration:.2}},children:(0,a.jsx)(w.Wq,{className:"overflow-hidden border border-gray-200 rounded-2xl cursor-pointer",shadowColor:"rgba(0,0,0,0.15)",shadowIntensity:.2,children:(0,a.jsxs)(d.Zp,{className:"overflow-hidden border-0 shadow-none",children:[(0,a.jsxs)("div",{className:"relative h-48",children:[(0,a.jsx)("img",{src:e.image_url||"https://via.placeholder.com/400x200?text=Event",alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/400x200?text=Event"}}),e.categories&&(0,a.jsx)("div",{className:"absolute top-2 left-2",children:(0,a.jsx)(m.E,{className:"bg-[#6CDAEC] text-white",children:e.categories.name})}),s&&(0,a.jsx)("div",{className:"absolute top-2 right-2",children:(0,a.jsx)(m.E,{className:"bg-green-100 text-green-800",children:"Booked"})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2 text-gray-900 line-clamp-2",children:e.title}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{children:new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{children:e.time})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{className:"line-clamp-1",children:e.location||"Location TBD"})]}),(0,a.jsx)("div",{className:"flex items-center text-sm text-gray-500",children:(0,a.jsx)(N.a,{rating:4.2,reviewCount:8,size:"sm",showCount:!1,className:"text-sm"})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 text-[#6CDAEC] mr-1"}),(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:0===e.price?"Free":"$".concat(e.price)})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(i(),{href:"/events/".concat(e.id),children:(0,a.jsx)(c.$,{variant:"outline",size:"sm",children:"Details"})}),s?(0,a.jsx)(c.$,{disabled:!0,size:"sm",className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Booked"}):(0,a.jsx)(i(),{href:"/customer/book-event/".concat(e.id),children:(0,a.jsx)(c.$,{size:"sm",className:"bg-[#6CDAEC] hover:bg-[#5BC8D9]",children:"Buy Ticket"})})]})]})]})]})})},e.id)})})]}),(0,a.jsx)(o.A,{})]})}},92214:(e,t,s)=>{"use strict";s.d(t,{a:()=>l});var a=s(95155);s(12115);var r=s(70865);s(25121);let l=e=>{let{rating:t,reviewCount:s,size:l="md",showCount:i=!0,className:n=""}=e,o={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},c={sm:"text-xs",md:"text-sm",lg:"text-base"};return 0===s?(0,a.jsxs)("div",{className:"flex items-center gap-1 text-gray-400 ".concat(n),children:[(0,a.jsx)(r.A,{className:o[l]}),(0,a.jsx)("span",{className:c[l],children:"No reviews"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-1 ".concat(n),children:[(0,a.jsx)("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(e=>(0,a.jsx)(r.A,{className:"".concat(o[l]," ").concat(e<=Math.round(t)?"fill-yellow-400 text-yellow-400":"text-gray-300")},e))}),(0,a.jsx)("span",{className:"font-medium ".concat(c[l]),children:t.toFixed(1)}),i&&(0,a.jsxs)("span",{className:"text-gray-500 ".concat(c[l]),children:["(",s,")"]})]})}},33900:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(95155),r=s(12115),l=s(21567);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},56345:(e,t,s)=>{"use strict";s.d(t,{BookingProvider:()=>n,W:()=>o});var a=s(95155),r=s(12115),l=s(85534);let i=(0,r.createContext)(void 0),n=e=>{let{children:t}=e,[s,n]=(0,r.useState)([]),[o,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null),m=async()=>{try{c(!0),u(null);let e=await l.Bn.getAllBookings();n(e||[])}catch(e){console.error("Error fetching bookings:",e),u(e.message||"Failed to fetch bookings")}finally{c(!1)}};(0,r.useEffect)(()=>{m()},[]);let x=async e=>{try{c(!0),u(null);let t=await l.Bn.createBooking(e);return t&&n(e=>[...e,t]),t}catch(e){return console.error("Error adding booking:",e),u(e.message||"Failed to add booking"),null}finally{c(!1)}},h=async e=>{try{c(!0),u(null);let t=await l.Bn.cancelBooking(e);return t&&n(t=>t.map(t=>t.id===e?{...t,status:"CANCELLED"}:t)),t}catch(e){return console.error("Error cancelling booking:",e),u(e.message||"Failed to cancel booking"),null}finally{c(!1)}},g=async()=>{try{return c(!0),u(null),await l.Bn.getUserBookings()||[]}catch(e){return console.error("Error getting user bookings:",e),u(e.message||"Failed to get user bookings"),[]}finally{c(!1)}},v=async()=>{try{return c(!0),u(null),await l.Bn.getAllBookings()||[]}catch(e){return console.error("Error getting all bookings:",e),u(e.message||"Failed to get all bookings"),[]}finally{c(!1)}};return(0,a.jsx)(i.Provider,{value:{bookings:s,loading:o,error:d,addBooking:x,cancelBooking:h,getUserBookings:g,getAllBookings:v,fetchBookings:m},children:t})},o=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useBookings must be used within a BookingProvider");return e}},98470:(e,t,s)=>{"use strict";s.d(t,{EventProvider:()=>n,L:()=>o});var a=s(95155),r=s(12115),l=s(85534);let i=(0,r.createContext)(void 0),n=e=>{let{children:t}=e,[s,n]=(0,r.useState)([]),[o,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null),m=async()=>{try{c(!0),u(null);let e=await l.MT.getAllEvents();n(e||[])}catch(e){console.error("Error fetching events:",e),u(e.message||"Failed to fetch events")}finally{c(!1)}};(0,r.useEffect)(()=>{m()},[]);let x=async e=>{try{c(!0),u(null);let t=await l.MT.createEvent(e);return t&&n(e=>[...e,t]),t}catch(e){return console.error("Error adding event:",e),u(e.message||"Failed to add event"),null}finally{c(!1)}},h=async(e,t)=>{try{c(!0),u(null);let s=await l.MT.updateEvent(e,t);return s&&n(t=>t.map(t=>t.id===e?{...t,...s}:t)),s}catch(e){return console.error("Error updating event:",e),u(e.message||"Failed to update event"),null}finally{c(!1)}},g=async e=>{try{c(!0),u(null);let t=await l.MT.deleteEvent(e);return t.success&&n(t=>t.filter(t=>t.id!==e)),t.success}catch(e){return console.error("Error deleting event:",e),u(e.message||"Failed to delete event"),!1}finally{c(!1)}};return(0,a.jsx)(i.Provider,{value:{events:s,loading:o,error:d,addEvent:x,updateEvent:h,deleteEvent:g,fetchEvents:m},children:t})},o=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useEvents must be used within an EventProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[1181,6232,3081,2809,7506,4934,8455,975,5534,8441,1517,7358],()=>t(30023)),_N_E=e.O()}]);