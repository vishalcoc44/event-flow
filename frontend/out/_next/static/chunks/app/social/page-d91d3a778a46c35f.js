(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7440],{77453:(e,s,r)=>{Promise.resolve().then(r.bind(r,4253))},4253:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>U});var t=r(95155),a=r(12115),l=r(22130),o=r(62884),n=r(35055),i=r(73312),d=r(92895),c=r(17146),u=r(20591),m=r(92823),x=r(32423),h=r(45471);let g=e=>{let{targetId:s,targetType:r,targetName:l,followerCount:o=0,variant:n="outline",size:g="default",className:f="",showCount:w=!0,onFollowChange:v}=e,{user:p}=(0,c.A)(),{isFollowing:j,followUser:y,unfollowUser:N,followEvent:b,unfollowEvent:E,followCategory:C,unfollowCategory:S}=(0,d.F)(),[U,_]=(0,a.useState)(!1),[R,I]=(0,a.useState)(!1),[F,A]=(0,a.useState)(o);(0,a.useEffect)(()=>{p&&q()},[p,s,r]);let q=async()=>{if(p)try{let e=await j(s,r);_(e)}catch(e){console.error("Error checking follow status:",e)}},T=async()=>{if(p&&(p.id!==s||"USER"!==r)){I(!0);try{if(U){switch(r){case"USER":await N(s);break;case"EVENT":await E(s);break;case"CATEGORY":await S(s)}_(!1),A(e=>Math.max(0,e-1)),null==v||v(!1)}else{switch(r){case"USER":await y(s);break;case"EVENT":await b(s);break;case"CATEGORY":await C(s)}_(!0),A(e=>e+1),null==v||v(!0)}}catch(e){console.error("Error toggling follow:",e)}finally{I(!1)}}},W=()=>{if(U)return(0,t.jsx)(u.A,{className:"w-4 h-4 fill-current"});switch(r){case"USER":return(0,t.jsx)(m.A,{className:"w-4 h-4"});case"EVENT":return(0,t.jsx)(x.A,{className:"w-4 h-4"});case"CATEGORY":return(0,t.jsx)(h.A,{className:"w-4 h-4"});default:return(0,t.jsx)(u.A,{className:"w-4 h-4"})}},P=()=>{if(R)return"...";if(U)switch(r){case"USER":default:return"Following";case"EVENT":return"Following Event";case"CATEGORY":return"Following Category"}else switch(r){case"USER":default:return"Follow";case"EVENT":return"Follow Event";case"CATEGORY":return"Follow Category"}};return p?(0,t.jsxs)(i.$,{variant:U?"default":n,size:g,className:"".concat(f," ").concat(U?"bg-primary text-primary-foreground":""),onClick:T,disabled:R||p.id===s&&"USER"===r,children:[W(),(0,t.jsx)("span",{className:"ml-2",children:P()}),w&&F>0&&(0,t.jsx)("span",{className:"ml-2 text-xs bg-background/50 px-2 py-1 rounded",children:F})]}):(0,t.jsxs)(i.$,{variant:n,size:g,className:f,onClick:()=>{console.log("Please login to follow")},children:[W(),(0,t.jsx)("span",{className:"ml-2",children:P()}),w&&F>0&&(0,t.jsx)("span",{className:"ml-2 text-xs bg-background/50 px-2 py-1 rounded",children:F})]})};var f=r(67427),w=r(66462);let v=e=>{var s;let{userId:r,showFollowButton:o=!0,className:i=""}=e,{user:u}=(0,c.A)(),{getUserProfile:m,getUserFollowers:v,getUserFollows:p}=(0,d.F)(),[j,y]=(0,a.useState)(null),[N,b]=(0,a.useState)([]),[E,C]=(0,a.useState)([]),[S,U]=(0,a.useState)([]),[_,R]=(0,a.useState)([]),[I,F]=(0,a.useState)(!0),[A,q]=(0,a.useState)("followers");(0,a.useEffect)(()=>{T()},[r]);let T=async()=>{try{F(!0);let[e,s,t,a,l]=await Promise.all([m(r),v(r),p("USER"),p("EVENT"),p("CATEGORY")]);y(e),b(s),C(t),U(a),R(l)}catch(e){console.error("Error loading profile:",e)}finally{F(!1)}};if(I)return(0,t.jsx)(l.Zp,{className:i,children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsx)("div",{className:"animate-pulse",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-24"})]})]})})})});if(!j)return(0,t.jsx)(l.Zp,{className:i,children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Profile not found"})})});let W=(null==u?void 0:u.id)===r,P=(null===(s=j.username)||void 0===s?void 0:s.charAt(0).toUpperCase())||j.email.charAt(0).toUpperCase();return(0,t.jsxs)(l.Zp,{className:i,children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(l.ZB,{className:"text-xl font-semibold",children:"Profile"}),o&&!W&&(0,t.jsx)(g,{targetId:r,targetType:"USER",targetName:j.username,followerCount:j.follower_count,variant:"outline",size:"sm"})]})}),(0,t.jsxs)(l.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(n.eu,{className:"w-16 h-16",children:[(0,t.jsx)(n.BK,{src:"",alt:j.username}),(0,t.jsx)(n.q5,{className:"text-lg font-semibold",children:P})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold",children:j.username}),(0,t.jsxs)("p",{className:"text-muted-foreground flex items-center",children:[(0,t.jsx)(w.A,{className:"w-4 h-4 mr-2"}),j.email]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground capitalize",children:j.role.toLowerCase()})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,t.jsxs)(f.Wq,{className:"text-center p-4 bg-muted/50 rounded-lg cursor-pointer",shadowColor:"rgba(0,0,0,0.08)",shadowIntensity:.1,children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-primary",children:j.follower_count}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Followers"})]}),(0,t.jsxs)(f.Wq,{className:"text-center p-4 bg-muted/50 rounded-lg cursor-pointer",shadowColor:"rgba(0,0,0,0.08)",shadowIntensity:.1,children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-primary",children:E.length}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Following Users"})]}),(0,t.jsxs)(f.Wq,{className:"text-center p-4 bg-muted/50 rounded-lg cursor-pointer",shadowColor:"rgba(0,0,0,0.08)",shadowIntensity:.1,children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-primary",children:S.length}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Following Events"})]}),(0,t.jsxs)(f.Wq,{className:"text-center p-4 bg-muted/50 rounded-lg cursor-pointer",shadowColor:"rgba(0,0,0,0.08)",shadowIntensity:.1,children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-primary",children:_.length}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Following Categories"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex space-x-1 border-b",children:[(0,t.jsxs)("button",{onClick:()=>q("followers"),className:"px-4 py-2 text-sm font-medium transition-colors ".concat("followers"===A?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"),children:["Followers (",N.length,")"]}),(0,t.jsxs)("button",{onClick:()=>q("following"),className:"px-4 py-2 text-sm font-medium transition-colors ".concat("following"===A?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"),children:["Following (",E.length+S.length+_.length,")"]})]}),(0,t.jsx)("div",{className:"max-h-64 overflow-y-auto",children:"followers"===A?(0,t.jsx)("div",{className:"space-y-2",children:0===N.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No followers yet"}):N.map(e=>{var s,r,a,l,o,i,d;return(0,t.jsx)(f.Wq,{className:"rounded cursor-pointer",shadowColor:"rgba(0,0,0,0.08)",shadowIntensity:.1,children:(0,t.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(n.eu,{className:"w-8 h-8",children:[(0,t.jsx)(n.BK,{src:"",alt:null===(s=e.follower)||void 0===s?void 0:s.username}),(0,t.jsx)(n.q5,{className:"text-xs",children:(null===(a=e.follower)||void 0===a?void 0:null===(r=a.username)||void 0===r?void 0:r.charAt(0).toUpperCase())||"U"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:null===(l=e.follower)||void 0===l?void 0:l.username}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:null===(o=e.follower)||void 0===o?void 0:o.email})]})]}),!W&&(0,t.jsx)(g,{targetId:null===(i=e.follower)||void 0===i?void 0:i.id,targetType:"USER",targetName:null===(d=e.follower)||void 0===d?void 0:d.username,variant:"ghost",size:"sm",showCount:!1})]})},e.id)})}):(0,t.jsx)("div",{className:"space-y-2",children:0===E.length&&0===S.length&&0===_.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"Not following anyone yet"}):(0,t.jsxs)(t.Fragment,{children:[E.length>0&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:["Users (",E.length,")"]}),E.map(e=>{var s,r,a,l,o,i,d;return(0,t.jsx)(f.Wq,{className:"rounded cursor-pointer",shadowColor:"rgba(0,0,0,0.08)",shadowIntensity:.1,children:(0,t.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(n.eu,{className:"w-8 h-8",children:[(0,t.jsx)(n.BK,{src:"",alt:null===(s=e.target_user)||void 0===s?void 0:s.username}),(0,t.jsx)(n.q5,{className:"text-xs",children:(null===(a=e.target_user)||void 0===a?void 0:null===(r=a.username)||void 0===r?void 0:r.charAt(0).toUpperCase())||"U"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:null===(l=e.target_user)||void 0===l?void 0:l.username}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:null===(o=e.target_user)||void 0===o?void 0:o.email})]})]}),(0,t.jsx)(g,{targetId:null===(i=e.target_user)||void 0===i?void 0:i.id,targetType:"USER",targetName:null===(d=e.target_user)||void 0===d?void 0:d.username,variant:"ghost",size:"sm",showCount:!1})]})},e.id)})]}),S.length>0&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:["Events (",S.length,")"]}),S.map(e=>{var s,r,a,l;return(0,t.jsx)(f.Wq,{className:"rounded cursor-pointer",shadowColor:"rgba(0,0,0,0.08)",shadowIntensity:.1,children:(0,t.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(x.A,{className:"w-4 h-4 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:null===(s=e.target_event)||void 0===s?void 0:s.title}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:null===(r=e.target_event)||void 0===r?void 0:r.date})]})]}),(0,t.jsx)(g,{targetId:null===(a=e.target_event)||void 0===a?void 0:a.id,targetType:"EVENT",targetName:null===(l=e.target_event)||void 0===l?void 0:l.title,variant:"ghost",size:"sm",showCount:!1})]})},e.id)})]}),_.length>0&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:["Categories (",_.length,")"]}),_.map(e=>{var s,r,a,l;return(0,t.jsx)(f.Wq,{className:"rounded cursor-pointer",shadowColor:"rgba(0,0,0,0.08)",shadowIntensity:.1,children:(0,t.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(h.A,{className:"w-4 h-4 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:null===(s=e.target_category)||void 0===s?void 0:s.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:null===(r=e.target_category)||void 0===r?void 0:r.description})]})]}),(0,t.jsx)(g,{targetId:null===(a=e.target_category)||void 0===a?void 0:a.id,targetType:"CATEGORY",targetName:null===(l=e.target_category)||void 0===l?void 0:l.name,variant:"ghost",size:"sm",showCount:!1})]})},e.id)})]})]})})})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground text-center pt-4 border-t",children:["Member since ",new Date(j.created_at).toLocaleDateString()]})]})]})};var p=r(98470),j=r(63936),y=r(20853),N=r(33900),b=r(71714),E=r(11712),C=r(47548),S=r(4370);function U(){let{user:e}=(0,c.A)(),{events:s}=(0,p.L)(),{categories:r}=(0,j.C)(),{userFollows:i,getUserFollows:w,getUserFollowers:U,followUser:_,unfollowUser:R,followEvent:I,unfollowEvent:F,followCategory:A,unfollowCategory:q}=(0,d.F)(),[T,W]=(0,a.useState)("profile"),[P,k]=(0,a.useState)([]),[Y,V]=(0,a.useState)([]),[B,L]=(0,a.useState)([]),[Z,z]=(0,a.useState)("");(0,a.useEffect)(()=>{e&&O()},[e]);let O=async()=>{if(e)try{let{data:s}=await E.ND.from("users").select("id, email, username, first_name, last_name, role, follower_count, created_at").order("created_at",{ascending:!1}),[r,t]=await Promise.all([w(),U(e.id)]);k(r),V(t),L(s||[])}catch(e){console.error("Error loading social data:",e)}};return e?(0,t.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,t.jsx)(C.A,{user:e?{...e,role:"USER"===e.role?"customer":e.role}:null}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)(b.P.div,{className:"mb-8",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.8,delay:.2},children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Social Dashboard"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Connect with other users, follow events, and discover categories"})]}),(0,t.jsxs)(o.tU,{value:T,onValueChange:W,className:"space-y-6",children:[(0,t.jsxs)(o.j7,{className:"grid w-full grid-cols-5",children:[(0,t.jsx)(o.Xi,{value:"profile",children:"Profile"}),(0,t.jsx)(o.Xi,{value:"follows",children:"Following"}),(0,t.jsx)(o.Xi,{value:"search",children:"Search"}),(0,t.jsx)(o.Xi,{value:"events",children:"Events"}),(0,t.jsx)(o.Xi,{value:"categories",children:"Categories"})]}),(0,t.jsx)(o.av,{value:"profile",className:"space-y-6",children:(0,t.jsx)(b.P.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.8,delay:.2},children:(0,t.jsx)(f.Wq,{className:"bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer",shadowColor:"rgba(0,0,0,0.15)",shadowIntensity:.2,children:(0,t.jsx)(v,{userId:e.id,showFollowButton:!1})})})}),(0,t.jsx)(o.av,{value:"follows",className:"space-y-6",children:(0,t.jsxs)(b.P.div,{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.8,delay:.2},children:[(0,t.jsx)(b.P.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.1},children:(0,t.jsx)(f.Wq,{className:"bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer",shadowColor:"rgba(0,0,0,0.15)",shadowIntensity:.2,children:(0,t.jsxs)(l.Zp,{className:"p-6 border-0 shadow-none",children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center",children:[(0,t.jsx)(m.A,{className:"w-5 h-5 mr-2"}),"Following Users (",P.filter(e=>"USER"===e.target_type).length,")"]})}),(0,t.jsx)(l.Wu,{className:"space-y-3",children:0===P.filter(e=>"USER"===e.target_type).length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"Not following any users yet"}):P.filter(e=>"USER"===e.target_type).map(e=>{var s,r,a,l,o,i,d;return(0,t.jsx)(f.Wq,{className:"border rounded-lg cursor-pointer",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,children:(0,t.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(n.eu,{className:"w-10 h-10",children:[(0,t.jsx)(n.BK,{src:"",alt:null===(s=e.target_user)||void 0===s?void 0:s.username}),(0,t.jsx)(n.q5,{children:(null===(a=e.target_user)||void 0===a?void 0:null===(r=a.username)||void 0===r?void 0:r.charAt(0).toUpperCase())||"U"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:null===(l=e.target_user)||void 0===l?void 0:l.username}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:null===(o=e.target_user)||void 0===o?void 0:o.email})]})]}),(0,t.jsx)(g,{targetId:null===(i=e.target_user)||void 0===i?void 0:i.id,targetType:"USER",targetName:null===(d=e.target_user)||void 0===d?void 0:d.username,variant:"ghost",size:"sm",showCount:!1})]})},e.id)})})]})})}),(0,t.jsx)(b.P.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},children:(0,t.jsx)(f.Wq,{className:"bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer",shadowColor:"rgba(0,0,0,0.15)",shadowIntensity:.2,children:(0,t.jsxs)(l.Zp,{className:"p-6 border-0 shadow-none",children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center",children:[(0,t.jsx)(u.A,{className:"w-5 h-5 mr-2"}),"Followers (",Y.length,")"]})}),(0,t.jsx)(l.Wu,{className:"space-y-3",children:0===Y.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No followers yet"}):Y.map(e=>{var s,r,a,l,o,i,d;return(0,t.jsx)(f.Wq,{className:"border rounded-lg cursor-pointer",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,children:(0,t.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(n.eu,{className:"w-10 h-10",children:[(0,t.jsx)(n.BK,{src:"",alt:null===(s=e.follower)||void 0===s?void 0:s.username}),(0,t.jsx)(n.q5,{children:(null===(a=e.follower)||void 0===a?void 0:null===(r=a.username)||void 0===r?void 0:r.charAt(0).toUpperCase())||"U"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:null===(l=e.follower)||void 0===l?void 0:l.username}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:null===(o=e.follower)||void 0===o?void 0:o.email})]})]}),(0,t.jsx)(g,{targetId:null===(i=e.follower)||void 0===i?void 0:i.id,targetType:"USER",targetName:null===(d=e.follower)||void 0===d?void 0:d.username,variant:"ghost",size:"sm",showCount:!1})]})},e.id)})})]})})})]})}),(0,t.jsx)(o.av,{value:"search",className:"space-y-6",children:(0,t.jsx)(b.P.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.8,delay:.2},children:(0,t.jsx)(f.Wq,{className:"bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer",shadowColor:"rgba(0,0,0,0.15)",shadowIntensity:.2,children:(0,t.jsxs)(l.Zp,{className:"p-6 border-0 shadow-none",children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center",children:[(0,t.jsx)(y.A,{className:"w-5 h-5 mr-2"}),"Search Users"]})}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(N.p,{type:"text",placeholder:"Search by username, email, or name...",value:Z,onChange:e=>z(e.target.value),className:"w-full"})}),(0,t.jsxs)("div",{className:"space-y-3",children:[B.filter(s=>s.id!==e.id).filter(e=>{var s,r,t,a;return""===Z||(null===(s=e.username)||void 0===s?void 0:s.toLowerCase().includes(Z.toLowerCase()))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(Z.toLowerCase()))||(null===(t=e.first_name)||void 0===t?void 0:t.toLowerCase().includes(Z.toLowerCase()))||(null===(a=e.last_name)||void 0===a?void 0:a.toLowerCase().includes(Z.toLowerCase()))}).map(e=>{var s;return(0,t.jsx)(f.Wq,{className:"border rounded-lg cursor-pointer",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,children:(0,t.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(n.eu,{className:"w-10 h-10",children:[(0,t.jsx)(n.BK,{src:"",alt:e.username}),(0,t.jsx)(n.q5,{children:(null===(s=e.username)||void 0===s?void 0:s.charAt(0).toUpperCase())||"U"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.username}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.first_name," ",e.last_name]})]})]}),(0,t.jsx)(g,{targetId:e.id,targetType:"USER",targetName:e.username,followerCount:e.follower_count||0,variant:"outline",size:"sm"})]})},e.id)}),0===B.filter(s=>s.id!==e.id).length&&(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No users found"})]})]})]})})})}),(0,t.jsx)(o.av,{value:"events",className:"space-y-6",children:(0,t.jsx)(b.P.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.8,delay:.2},children:(0,t.jsx)(f.Wq,{className:"bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer",shadowColor:"rgba(0,0,0,0.15)",shadowIntensity:.2,children:(0,t.jsxs)(l.Zp,{className:"p-6 border-0 shadow-none",children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center",children:[(0,t.jsx)(x.A,{className:"w-5 h-5 mr-2"}),"Follow Events"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===s.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center col-span-full py-4",children:"No events available"}):s.map(e=>(0,t.jsx)(f.Wq,{className:"border rounded-lg cursor-pointer",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,children:(0,t.jsxs)("div",{className:"p-4 space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[new Date(e.date).toLocaleDateString()," at ",e.time]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.location})]}),(0,t.jsx)(g,{targetId:e.id,targetType:"EVENT",targetName:e.title,followerCount:e.follower_count||0,variant:"outline",size:"sm",className:"w-full"})]})},e.id))})})]})})})}),(0,t.jsx)(o.av,{value:"categories",className:"space-y-6",children:(0,t.jsx)(b.P.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.8,delay:.2},children:(0,t.jsx)(f.Wq,{className:"bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer",shadowColor:"rgba(0,0,0,0.15)",shadowIntensity:.2,children:(0,t.jsxs)(l.Zp,{className:"p-6 border-0 shadow-none",children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center",children:[(0,t.jsx)(h.A,{className:"w-5 h-5 mr-2"}),"Follow Categories"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===r.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center col-span-full py-4",children:"No categories available"}):r.map(e=>(0,t.jsx)(f.Wq,{className:"border rounded-lg cursor-pointer",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,children:(0,t.jsxs)("div",{className:"p-4 space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]}),(0,t.jsx)(g,{targetId:e.id,targetType:"CATEGORY",targetName:e.name,followerCount:e.follower_count||0,variant:"outline",size:"sm",className:"w-full"})]})},e.id))})})]})})})})]})]}),(0,t.jsx)(S.A,{})]}):(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:"Please log in to access social features."})})})})}},35055:(e,s,r)=>{"use strict";r.d(s,{BK:()=>i,eu:()=>n,q5:()=>d});var t=r(95155),a=r(12115),l=r(58078),o=r(21567);let n=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.bL,{ref:s,className:(0,o.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...a})});n.displayName=l.bL.displayName;let i=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l._V,{ref:s,className:(0,o.cn)("aspect-square h-full w-full",r),...a})});i.displayName=l._V.displayName;let d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.H4,{ref:s,className:(0,o.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...a})});d.displayName=l.H4.displayName},33900:(e,s,r)=>{"use strict";r.d(s,{p:()=>o});var t=r(95155),a=r(12115),l=r(21567);let o=a.forwardRef((e,s)=>{let{className:r,type:a,...o}=e;return(0,t.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:s,...o})});o.displayName="Input"},62884:(e,s,r)=>{"use strict";r.d(s,{Xi:()=>d,av:()=>c,j7:()=>i,tU:()=>n});var t=r(95155),a=r(12115),l=r(9579),o=r(21567);let n=l.bL,i=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.B8,{ref:s,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...a})});i.displayName=l.B8.displayName;let d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.l9,{ref:s,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...a})});d.displayName=l.l9.displayName;let c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.UC,{ref:s,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...a})});c.displayName=l.UC.displayName},63936:(e,s,r)=>{"use strict";r.d(s,{C:()=>i,CategoryProvider:()=>n});var t=r(95155),a=r(12115),l=r(85534);let o=(0,a.createContext)(void 0),n=e=>{let{children:s}=e,[r,n]=(0,a.useState)([]),[i,d]=(0,a.useState)(!0),[c,u]=(0,a.useState)(null),m=async()=>{try{d(!0),u(null);let e=await l.fm.getAllCategories();n(e||[])}catch(e){console.error("Error fetching categories:",e),u(e.message||"Failed to fetch categories")}finally{d(!1)}};(0,a.useEffect)(()=>{m()},[]);let x=async e=>{try{d(!0),u(null);let s=await l.fm.createCategory(e);return s&&n(e=>[...e,s]),s}catch(e){return console.error("Error adding category:",e),u(e.message||"Failed to add category"),null}finally{d(!1)}},h=async(e,s)=>{try{d(!0),u(null);let r=await l.fm.updateCategory(e,s);return r&&n(s=>s.map(s=>s.id===e?{...s,...r}:s)),r}catch(e){return console.error("Error updating category:",e),u(e.message||"Failed to update category"),null}finally{d(!1)}},g=async e=>{try{d(!0),u(null);let s=await l.fm.deleteCategory(e);return s.success&&n(s=>s.filter(s=>s.id!==e)),s.success}catch(e){return console.error("Error deleting category:",e),u(e.message||"Failed to delete category"),!1}finally{d(!1)}};return(0,t.jsx)(o.Provider,{value:{categories:r,loading:i,error:c,addCategory:x,updateCategory:h,deleteCategory:g,fetchCategories:m},children:s})},i=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("useCategories must be used within a CategoryProvider");return e}},98470:(e,s,r)=>{"use strict";r.d(s,{EventProvider:()=>n,L:()=>i});var t=r(95155),a=r(12115),l=r(85534);let o=(0,a.createContext)(void 0),n=e=>{let{children:s}=e,[r,n]=(0,a.useState)([]),[i,d]=(0,a.useState)(!0),[c,u]=(0,a.useState)(null),m=async()=>{try{d(!0),u(null);let e=await l.MT.getAllEvents();n(e||[])}catch(e){console.error("Error fetching events:",e),u(e.message||"Failed to fetch events")}finally{d(!1)}};(0,a.useEffect)(()=>{m()},[]);let x=async e=>{try{d(!0),u(null);let s=await l.MT.createEvent(e);return s&&n(e=>[...e,s]),s}catch(e){return console.error("Error adding event:",e),u(e.message||"Failed to add event"),null}finally{d(!1)}},h=async(e,s)=>{try{d(!0),u(null);let r=await l.MT.updateEvent(e,s);return r&&n(s=>s.map(s=>s.id===e?{...s,...r}:s)),r}catch(e){return console.error("Error updating event:",e),u(e.message||"Failed to update event"),null}finally{d(!1)}},g=async e=>{try{d(!0),u(null);let s=await l.MT.deleteEvent(e);return s.success&&n(s=>s.filter(s=>s.id!==e)),s.success}catch(e){return console.error("Error deleting event:",e),u(e.message||"Failed to delete event"),!1}finally{d(!1)}};return(0,t.jsx)(o.Provider,{value:{events:r,loading:i,error:c,addEvent:x,updateEvent:h,deleteEvent:g,fetchEvents:m},children:s})},i=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("useEvents must be used within an EventProvider");return e}},92895:(e,s,r)=>{"use strict";r.d(s,{F:()=>d,SocialProvider:()=>c});var t=r(95155),a=r(12115),l=r(85534),o=r(11712),n=r(17146);let i=(0,a.createContext)(void 0),d=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useSocial must be used within a SocialProvider");return e},c=e=>{let{children:s}=e,{user:r}=(0,n.A)(),[d,c]=(0,a.useState)([]),[u,m]=(0,a.useState)([]),[x,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{r?(w(),v(),R()):(c([]),m([]),I())},[r]),(0,a.useEffect)(()=>()=>{I()},[]);let w=async()=>{if(r)try{h(!0);let e=await l.Y.getUserFollows();c(e)}catch(e){console.error("Error loading user follows:",e)}finally{h(!1)}},v=async()=>{if(r)try{let e=await l.Y.getUserFollowers(r.id);m(e)}catch(e){console.error("Error loading user followers:",e)}},p=async e=>{if(!r)throw Error("User not authenticated");try{h(!0),await l.Y.followUser(e),await w()}catch(e){throw console.error("Error following user:",e),e}finally{h(!1)}},j=async e=>{if(!r)throw Error("User not authenticated");try{h(!0),await l.Y.unfollowUser(e),await w()}catch(e){throw console.error("Error unfollowing user:",e),e}finally{h(!1)}},y=async e=>{if(!r)throw Error("User not authenticated");try{h(!0),await l.Y.followEvent(e),await w()}catch(e){throw console.error("Error following event:",e),e}finally{h(!1)}},N=async e=>{if(!r)throw Error("User not authenticated");try{h(!0),await l.Y.unfollowEvent(e),await w()}catch(e){throw console.error("Error unfollowing event:",e),e}finally{h(!1)}},b=async e=>{if(!r)throw Error("User not authenticated");try{h(!0),await l.Y.followCategory(e),await w()}catch(e){throw console.error("Error following category:",e),e}finally{h(!1)}},E=async e=>{if(!r)throw Error("User not authenticated");try{h(!0),await l.Y.unfollowCategory(e),await w()}catch(e){throw console.error("Error unfollowing category:",e),e}finally{h(!1)}},C=async(e,s)=>{if(!r)return!1;try{return await l.Y.isFollowing(e,s)}catch(e){return console.error("Error checking follow status:",e),!1}},S=async e=>{if(!r)return[];try{return await l.Y.getUserFollows(e)}catch(e){return console.error("Error getting user follows:",e),[]}},U=async e=>{try{return await l.Y.getUserFollowers(e)}catch(e){return console.error("Error getting user followers:",e),[]}},_=async e=>{try{return await l.Y.getUserProfile(e)}catch(e){throw console.error("Error getting user profile:",e),e}},R=()=>{r&&f(o.ND.channel("follows_changes").on("postgres_changes",{event:"*",schema:"public",table:"follows",filter:"follower_id=eq.".concat(r.id)},e=>{console.log("Follows change detected:",e),w()}).on("postgres_changes",{event:"*",schema:"public",table:"follows",filter:"target_id=eq.".concat(r.id," AND target_type=eq.USER")},e=>{console.log("Followers change detected:",e),v()}).subscribe())},I=()=>{g&&(o.ND.removeChannel(g),f(null))};return(0,t.jsx)(i.Provider,{value:{userFollows:d,userFollowers:u,isLoading:x,followUser:p,unfollowUser:j,followEvent:y,unfollowEvent:N,followCategory:b,unfollowCategory:E,isFollowing:C,getUserFollows:S,getUserFollowers:U,getUserProfile:_,subscribeToFollows:R,unsubscribeFromFollows:I},children:s})}}},e=>{var s=s=>e(e.s=s);e.O(0,[1181,6232,3081,2809,7506,9579,6481,4934,8455,975,5534,8441,1517,7358],()=>s(77453)),_N_E=e.O()}]);