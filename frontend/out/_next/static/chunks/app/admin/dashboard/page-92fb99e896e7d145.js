(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5957],{30293:(e,t,a)=>{Promise.resolve().then(a.bind(a,52606))},52606:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var r=a(95155),n=a(12115),s=a(48173),i=a.n(s),l=a(47548),o=a(4370),c=a(73312),d=a(22130),x=a(17146),u=a(98470),h=a(85534),v=a(87248),m=a(86131),p=a(67427);function w(){let{user:e}=(0,x.A)(),{events:t}=(0,u.L)(),[a,s]=(0,n.useState)({totalEvents:0,totalBookings:0,revenue:0,newUsers:0,recentActivity:[],recentBookings:[]}),[w,g]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{try{g(!0);let e=await h.MT.getAllEvents(),t=(null==e?void 0:e.length)||0,a=await h.Bn.getAllBookings(),r=(null==a?void 0:a.length)||0,n=0;a&&a.length>0&&(n=a.reduce((e,t)=>{var a;let r=(null===(a=t.event)||void 0===a?void 0:a.price)||0;return e+r},0));let i=(null==a?void 0:a.slice(0,7).map(e=>{var t,a,r,n;return{id:e.id,eventName:(null===(t=e.event)||void 0===t?void 0:t.title)||"Unknown Event",user:(null===(a=e.user)||void 0===a?void 0:a.username)||(null===(r=e.user)||void 0===r?void 0:r.email)||"Unknown User",date:(null===(n=e.event)||void 0===n?void 0:n.date)||new Date().toISOString().split("T")[0],status:e.status}}))||[],l=[];if(e&&e.length>0){let t=e.slice(0,3).map(e=>({type:"event",title:'New event "'.concat(e.title,'" created'),time:y(new Date(e.created_at||Date.now()))}));l.push(...t)}if(a&&a.length>0){let e=a.slice(0,2).map(e=>{var t;return{type:"booking",title:"Booking ID #".concat(e.id.substring(0,8),' for "').concat(null===(t=e.event)||void 0===t?void 0:t.title,'" ').concat(e.status.toLowerCase()),time:y(new Date(e.created_at||Date.now()))}});l.push(...e)}l.sort((e,t)=>new Date(t.time).getTime()-new Date(e.time).getTime()),s({totalEvents:t,totalBookings:r,revenue:n,newUsers:0,recentActivity:l,recentBookings:i})}catch(e){console.error("Error fetching dashboard data:",e)}finally{g(!1)}})()},[]);let y=e=>{let t=Math.floor((new Date().getTime()-e.getTime())/1e3);if(t<60)return"just now";if(t<3600){let e=Math.floor(t/60);return"".concat(e," minute").concat(e>1?"s":""," ago")}if(t<86400){let e=Math.floor(t/3600);return"".concat(e," hour").concat(e>1?"s":""," ago")}{let e=Math.floor(t/86400);return"".concat(e," day").concat(e>1?"s":""," ago")}};return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,r.jsx)(l.A,{user:e?{role:"USER"===e.role?"customer":e.role}:null}),(0,r.jsxs)("main",{className:"flex-grow container mx-auto px-4 py-8",children:[(0,r.jsxs)(v.P.div,{className:"mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Overview of your event management system"})]}),(0,r.jsxs)(v.P.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.8,delay:.2},children:[(0,r.jsx)(v.P.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.1},children:(0,r.jsx)(m.mJ,{title:"Total Events",value:w?"...":a.totalEvents,description:"Total events in the system",icon:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})})})}),(0,r.jsx)(v.P.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},children:(0,r.jsx)(m.mJ,{title:"Total Bookings",value:w?"...":a.totalBookings,description:"Total bookings made",icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,r.jsx)("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]})})}),(0,r.jsx)(v.P.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.3},children:(0,r.jsx)(m.mJ,{title:"Revenue Generated",value:w?"...":"$".concat(a.revenue),description:"Total revenue from bookings",icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,r.jsx)("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z",clipRule:"evenodd"})]})})}),(0,r.jsx)(v.P.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.4},children:(0,r.jsx)(m.mJ,{title:"New Users",value:w?"...":a.newUsers,description:"New user registrations",icon:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})})})})]}),(0,r.jsxs)(v.P.div,{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.8,delay:.3},children:[(0,r.jsxs)(v.P.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:.1},children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Recent Activity"}),(0,r.jsx)(p.Wq,{className:"overflow-hidden bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer",shadowColor:"rgba(0,0,0,0.15)",shadowIntensity:.2,children:(0,r.jsx)(d.Zp,{className:"overflow-hidden border-0 shadow-none",children:w?(0,r.jsx)("div",{className:"p-4 text-center",children:"Loading activity data..."}):0===a.recentActivity.length?(0,r.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No recent activity"}):(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:a.recentActivity.map((e,t)=>(0,r.jsxs)(v.P.div,{className:"p-4 flex items-start hover:bg-gray-50 rounded-lg transition-colors duration-200",initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5,delay:.1*t},whileHover:{x:5,transition:{duration:.2}},children:[(0,r.jsxs)("div",{className:"mr-4",children:["event"===e.type&&(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-600",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})})}),"user"===e.type&&(0,r.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-green-600",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),"booking"===e.type&&(0,r.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-purple-600",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,r.jsx)("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]})}),"category"===e.type&&(0,r.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-600",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),"admin"===e.type&&(0,r.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-red-600",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z",clipRule:"evenodd"})})})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm text-gray-800",children:e.title}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.time})]})]},t))})})})]}),(0,r.jsxs)(v.P.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:.2},children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Event Bookings"}),(0,r.jsx)(i(),{href:"/admin/bookings",children:(0,r.jsx)(c.$,{variant:"outline",size:"sm",children:"View All"})})]}),(0,r.jsx)(p.Wq,{className:"overflow-hidden bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer",shadowColor:"rgba(0,0,0,0.15)",shadowIntensity:.2,children:(0,r.jsx)(d.Zp,{className:"overflow-hidden border-0 shadow-none",children:w?(0,r.jsx)("div",{className:"p-4 text-center",children:"Loading booking data..."}):0===a.recentBookings.length?(0,r.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No bookings found"}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Booking ID"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event Name"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.recentBookings.map((e,t)=>(0,r.jsxs)(v.P.tr,{className:"hover:bg-gray-50 transition-colors duration-200",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.1*t},whileHover:{scale:1.01,transition:{duration:.2}},children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.id.substring(0,8)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.eventName}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.user}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.date).toLocaleDateString()}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("CONFIRMED"===e.status?"bg-green-100 text-green-800":"PENDING"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status})})]},e.id))})]})})})})]})]})]}),(0,r.jsx)(o.A,{})]})}},83212:(e,t,a)=>{"use strict";a.d(t,{Q_:()=>l,bw:()=>o,oV:()=>c});var r=a(95155),n=a(21567),s=a(12115);let i=(0,s.createContext)(void 0),l=e=>{let{children:t,className:a,containerClassName:l}=e,o=(0,s.useRef)(null),[c,d]=(0,s.useState)(!1);return(0,r.jsx)(i.Provider,{value:[c,d],children:(0,r.jsx)("div",{className:(0,n.cn)("py-20 flex items-center justify-center",l),style:{perspective:"1000px"},children:(0,r.jsx)("div",{ref:o,onMouseEnter:e=>{if(d(!0),!o.current)return},onMouseMove:e=>{if(!o.current)return;let{left:t,top:a,width:r,height:n}=o.current.getBoundingClientRect(),s=(e.clientX-t-r/2)/25,i=(e.clientY-a-n/2)/25;o.current.style.transform="rotateY(".concat(s,"deg) rotateX(").concat(i,"deg)")},onMouseLeave:e=>{o.current&&(d(!1),o.current.style.transform="rotateY(0deg) rotateX(0deg)")},className:(0,n.cn)("flex items-center justify-center relative transition-all duration-200 ease-linear",a),style:{transformStyle:"preserve-3d"},children:t})})})},o=e=>{let{children:t,className:a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("h-96 w-96 [transform-style:preserve-3d]  [&>*]:[transform-style:preserve-3d]",a),children:t})},c=e=>{let{as:t="div",children:a,className:i,translateX:l=0,translateY:o=0,translateZ:c=0,rotateX:x=0,rotateY:u=0,rotateZ:h=0,...v}=e,m=(0,s.useRef)(null),[p]=d();(0,s.useEffect)(()=>{w()},[p]);let w=()=>{m.current&&(p?m.current.style.transform="translateX(".concat(l,"px) translateY(").concat(o,"px) translateZ(").concat(c,"px) rotateX(").concat(x,"deg) rotateY(").concat(u,"deg) rotateZ(").concat(h,"deg)"):m.current.style.transform="translateX(0px) translateY(0px) translateZ(0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg)")};return(0,r.jsx)(t,{ref:m,className:(0,n.cn)("w-fit transition duration-200 ease-linear",i),...v,children:a})},d=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useMouseEnter must be used within a MouseEnterProvider");return e}},86131:(e,t,a)=>{"use strict";a.d(t,{mJ:()=>i});var r=a(95155);a(12115);var n=a(83212),s=a(21567);function i(e){let{children:t,className:a,containerClassName:i,title:l,subtitle:o,icon:c,value:d,description:x,onClick:u}=e;return(0,r.jsx)(n.Q_,{className:(0,s.cn)("w-full h-full",i),children:(0,r.jsxs)(n.bw,{className:(0,s.cn)("bg-white relative group/card border border-gray-200 w-full h-auto rounded-2xl p-6 shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer",a),children:[l&&(0,r.jsx)(n.oV,{translateZ:"30",className:"text-sm font-medium text-gray-500 mb-2",children:l}),c&&(0,r.jsx)(n.oV,{translateZ:"40",className:"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center mb-4",children:c}),d&&(0,r.jsx)(n.oV,{translateZ:"50",className:"text-3xl font-bold text-gray-900 mb-1",children:d}),x&&(0,r.jsx)(n.oV,{translateZ:"60",className:"text-sm text-gray-500",children:x}),o&&(0,r.jsx)(n.oV,{translateZ:"70",className:"text-xs text-gray-400 mt-2",children:o}),t]})})}},98470:(e,t,a)=>{"use strict";a.d(t,{EventProvider:()=>l,L:()=>o});var r=a(95155),n=a(12115),s=a(85534);let i=(0,n.createContext)(void 0),l=e=>{let{children:t}=e,[a,l]=(0,n.useState)([]),[o,c]=(0,n.useState)(!0),[d,x]=(0,n.useState)(null),u=async()=>{try{c(!0),x(null);let e=await s.MT.getAllEvents();l(e||[])}catch(e){console.error("Error fetching events:",e),x(e.message||"Failed to fetch events")}finally{c(!1)}};(0,n.useEffect)(()=>{u()},[]);let h=async e=>{try{c(!0),x(null);let t=await s.MT.createEvent(e);return t&&l(e=>[...e,t]),t}catch(e){return console.error("Error adding event:",e),x(e.message||"Failed to add event"),null}finally{c(!1)}},v=async(e,t)=>{try{c(!0),x(null);let a=await s.MT.updateEvent(e,t);return a&&l(t=>t.map(t=>t.id===e?{...t,...a}:t)),a}catch(e){return console.error("Error updating event:",e),x(e.message||"Failed to update event"),null}finally{c(!1)}},m=async e=>{try{c(!0),x(null);let t=await s.MT.deleteEvent(e);return t.success&&l(t=>t.filter(t=>t.id!==e)),t.success}catch(e){return console.error("Error deleting event:",e),x(e.message||"Failed to delete event"),!1}finally{c(!1)}};return(0,r.jsx)(i.Provider,{value:{events:a,loading:o,error:d,addEvent:h,updateEvent:v,deleteEvent:m,fetchEvents:u},children:t})},o=()=>{let e=(0,n.useContext)(i);if(void 0===e)throw Error("useEvents must be used within an EventProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[1181,6232,3081,2809,7506,4934,8455,975,5534,8441,1517,7358],()=>t(30293)),_N_E=e.O()}]);