(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4598],{78428:(e,t,s)=>{Promise.resolve().then(s.bind(s,43919))},26764:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},70865:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},43919:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(95155),r=s(12115),i=s(71714),l=s(25683),n=s(98470),c=s(22130),o=s(73312),d=s(26764),h=s(45686),m=s(7223),u=s(48173),x=s.n(u),v=s(47548),p=s(4370),f=s(17146),y=s(67427),g=s(92214);function j(){let{events:e,deleteEvent:t,loading:s}=(0,n.L)(),{toast:u}=(0,m.dj)(),{user:j}=(0,f.A)(),[N,w]=(0,r.useState)(null),b=async e=>{w(e);try{if(await t(e))u({title:"Event Deleted",description:"The event has been successfully deleted.",variant:"default"});else throw Error("Failed to delete event")}catch(e){u({title:"Error",description:"Failed to delete the event. Please try again.",variant:"destructive"})}finally{w(null)}},E={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:20}}};return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,a.jsx)(v.A,{user:j?{role:"USER"===j.role?"customer":j.role}:null}),(0,a.jsxs)(i.P.div,{className:"container mx-auto px-4 py-8 flex-grow",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)(i.P.h1,{className:"text-3xl font-bold text-gray-900",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2},children:"All Events"}),(0,a.jsx)(y.Wq,{className:"cursor-pointer",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,hoverScale:1.02,hoverLift:-1,transitionDuration:150,children:(0,a.jsx)(x(),{href:"/admin/event",children:(0,a.jsx)(o.$,{children:"+ Add New Event"})})})]}),s?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(i.P.div,{className:"w-12 h-12 border-4 border-t-primary rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):0===e.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h3",{className:"text-xl font-medium text-gray-600 mb-4",children:"No events found"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"Get started by creating your first event"}),(0,a.jsx)(y.Wq,{className:"cursor-pointer",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,hoverScale:1.02,hoverLift:-1,transitionDuration:150,children:(0,a.jsx)(x(),{href:"/admin/event",children:(0,a.jsx)(o.$,{children:"Create Event"})})})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(0,a.jsx)(l.N,{children:e.map(e=>{var t;return(0,a.jsx)(i.P.div,{variants:E,layout:!0,exit:{opacity:0,scale:.8},children:(0,a.jsx)(y.Wq,{className:"cursor-pointer h-full",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,hoverScale:1.02,hoverLift:-1,transitionDuration:150,children:(0,a.jsxs)(c.Zp,{className:"overflow-hidden h-full flex flex-col",children:[(0,a.jsx)(c.aR,{className:"bg-gradient-to-r from-primary/80 to-primary pb-4",children:(0,a.jsx)(c.ZB,{className:"text-xl font-bold text-white",children:e.title})}),(0,a.jsxs)(c.Wu,{className:"p-4 space-y-2 flex-grow",children:[(0,a.jsx)("p",{className:"text-gray-700",children:e.description}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Category:"})," ",(null===(t=e.categories)||void 0===t?void 0:t.name)||"Uncategorized"]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Location:"})," ",e.location]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Price:"})," $",e.price]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Date:"})," ",new Date(e.date).toLocaleDateString()]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Time:"})," ",e.time]}),(0,a.jsxs)("div",{className:"text-gray-700",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Rating:"}),(0,a.jsx)(g.a,{rating:4.2,reviewCount:8,size:"sm",showCount:!0,className:"ml-2"})]}),e.image_url&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("img",{src:e.image_url,alt:e.title,className:"w-full h-40 object-cover rounded-md"})})]}),(0,a.jsxs)(c.wL,{className:"border-t p-4 bg-gray-50 flex justify-between",children:[(0,a.jsx)(y.Wq,{className:"cursor-pointer",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,hoverScale:1.02,hoverLift:-1,transitionDuration:150,children:(0,a.jsx)(x(),{href:"/admin/event?id=".concat(e.id),children:(0,a.jsxs)(o.$,{variant:"outline",className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"})," Edit"]})})}),(0,a.jsx)(y.Wq,{className:"cursor-pointer",shadowColor:"rgba(0,0,0,0.1)",shadowIntensity:.15,hoverScale:1.02,hoverLift:-1,transitionDuration:150,children:(0,a.jsx)(o.$,{onClick:()=>b(e.id),variant:"destructive",className:"flex items-center",disabled:N===e.id,children:N===e.id?(0,a.jsx)(i.P.div,{className:"w-5 h-5 border-t-2 border-white rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"})," Delete"]})})})]})]})})},e.id)})})})]}),(0,a.jsx)(p.A,{})]})}},92214:(e,t,s)=>{"use strict";s.d(t,{a:()=>i});var a=s(95155);s(12115);var r=s(70865);s(25121);let i=e=>{let{rating:t,reviewCount:s,size:i="md",showCount:l=!0,className:n=""}=e,c={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},o={sm:"text-xs",md:"text-sm",lg:"text-base"};return 0===s?(0,a.jsxs)("div",{className:"flex items-center gap-1 text-gray-400 ".concat(n),children:[(0,a.jsx)(r.A,{className:c[i]}),(0,a.jsx)("span",{className:o[i],children:"No reviews"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-1 ".concat(n),children:[(0,a.jsx)("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(e=>(0,a.jsx)(r.A,{className:"".concat(c[i]," ").concat(e<=Math.round(t)?"fill-yellow-400 text-yellow-400":"text-gray-300")},e))}),(0,a.jsx)("span",{className:"font-medium ".concat(o[i]),children:t.toFixed(1)}),l&&(0,a.jsxs)("span",{className:"text-gray-500 ".concat(o[i]),children:["(",s,")"]})]})}},7223:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m,oR:()=>h});var a=s(12115);let r=0,i=new Map,l=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=n(o,e),c.forEach(e=>{e(o)})}function h(e){let{...t}=e,s=(r=(r+1)%Number.MAX_VALUE).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(o);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:h,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},98470:(e,t,s)=>{"use strict";s.d(t,{EventProvider:()=>n,L:()=>c});var a=s(95155),r=s(12115),i=s(85534);let l=(0,r.createContext)(void 0),n=e=>{let{children:t}=e,[s,n]=(0,r.useState)([]),[c,o]=(0,r.useState)(!0),[d,h]=(0,r.useState)(null),m=async()=>{try{o(!0),h(null);let e=await i.MT.getAllEvents();n(e||[])}catch(e){console.error("Error fetching events:",e),h(e.message||"Failed to fetch events")}finally{o(!1)}};(0,r.useEffect)(()=>{m()},[]);let u=async e=>{try{o(!0),h(null);let t=await i.MT.createEvent(e);return t&&n(e=>[...e,t]),t}catch(e){return console.error("Error adding event:",e),h(e.message||"Failed to add event"),null}finally{o(!1)}},x=async(e,t)=>{try{o(!0),h(null);let s=await i.MT.updateEvent(e,t);return s&&n(t=>t.map(t=>t.id===e?{...t,...s}:t)),s}catch(e){return console.error("Error updating event:",e),h(e.message||"Failed to update event"),null}finally{o(!1)}},v=async e=>{try{o(!0),h(null);let t=await i.MT.deleteEvent(e);return t.success&&n(t=>t.filter(t=>t.id!==e)),t.success}catch(e){return console.error("Error deleting event:",e),h(e.message||"Failed to delete event"),!1}finally{o(!1)}};return(0,a.jsx)(l.Provider,{value:{events:s,loading:c,error:d,addEvent:u,updateEvent:x,deleteEvent:v,fetchEvents:m},children:t})},c=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useEvents must be used within an EventProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[1181,6232,3081,2809,7506,4934,8455,975,5534,8441,1517,7358],()=>t(78428)),_N_E=e.O()}]);