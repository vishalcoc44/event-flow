(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2824],{33392:(e,s,t)=>{Promise.resolve().then(t.bind(t,28843))},28843:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var r=t(95155),a=t(12115),l=t(17146),n=t(11712),i=t(47548),d=t(4370),c=t(73312),o=t(22130),u=t(25121),x=t(7223);function m(){let{user:e}=(0,l.A)(),{toast:s}=(0,x.dj)(),[t,m]=(0,a.useState)(null),[h,j]=(0,a.useState)(!0),[v,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{e&&p()},[e]);let p=async()=>{try{j(!0);let{data:t,error:r}=await n.ND.rpc("get_user_admin_request_status",{p_user_id:e.id});if(r){console.error("Error fetching admin request status:",r),s({title:"Error",description:"Failed to fetch admin request status",variant:"destructive"});return}m((null==t?void 0:t[0])||null)}catch(e){console.error("Error fetching admin request status:",e),s({title:"Error",description:"Failed to fetch admin request status",variant:"destructive"})}finally{j(!1)}},f=async()=>{if(e)try{g(!0);let{error:t}=await n.ND.rpc("cancel_admin_request",{p_user_id:e.id});if(t){console.error("Error cancelling request:",t),s({title:"Error",description:"Failed to cancel admin request",variant:"destructive"});return}s({title:"Success",description:"Admin request cancelled successfully"}),await p()}catch(e){console.error("Error cancelling request:",e),s({title:"Error",description:"Failed to cancel admin request",variant:"destructive"})}finally{g(!1)}};return e?(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,r.jsx)(i.A,{}),(0,r.jsx)("main",{className:"flex-grow py-8",children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admin Request Status"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Check the status of your admin privilege request"})]}),h?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):t?(0,r.jsxs)(o.Zp,{className:"max-w-2xl mx-auto",children:[(0,r.jsx)(o.aR,{children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(e=>{switch(e){case"PENDING":return(0,r.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})});case"APPROVED":return(0,r.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"REJECTED":return(0,r.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"CANCELLED":return(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});default:return null}})(t.status),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.ZB,{children:"Admin Request Status"}),(0,r.jsxs)(o.BT,{children:["Request submitted on ",new Date(t.created_at).toLocaleDateString()]})]}),(0,r.jsx)(u.E,{className:(e=>{switch(e){case"PENDING":return"bg-yellow-100 text-yellow-800";case"APPROVED":return"bg-green-100 text-green-800";case"REJECTED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(t.status),children:t.status})]})}),(0,r.jsxs)(o.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Request Details"}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsxs)("p",{className:"text-gray-700 mb-2",children:[(0,r.jsx)("strong",{children:"Reason:"})," ",t.reason]}),t.organization&&(0,r.jsxs)("p",{className:"text-gray-700 mb-2",children:[(0,r.jsx)("strong",{children:"Organization:"})," ",t.organization]}),(0,r.jsxs)("p",{className:"text-gray-700",children:[(0,r.jsx)("strong",{children:"Experience Level:"})," ",t.experience_level]})]})]}),t.reviewed_at&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Review Information"}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsxs)("p",{className:"text-gray-700 mb-2",children:[(0,r.jsx)("strong",{children:"Reviewed on:"})," ",new Date(t.reviewed_at).toLocaleDateString()]}),t.review_notes&&(0,r.jsxs)("p",{className:"text-gray-700",children:[(0,r.jsx)("strong",{children:"Review Notes:"})," ",t.review_notes]})]})]}),"PENDING"===t.status&&(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-yellow-400 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-yellow-800",children:"Request Under Review"}),(0,r.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"Your admin request is currently being reviewed by our administrators. You will be notified once a decision has been made."})]})]})}),(0,r.jsx)(c.$,{variant:"outline",onClick:f,disabled:v,className:"w-full",children:v?"Cancelling...":"Cancel Request"})]}),"APPROVED"===t.status&&(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-green-400 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-green-800",children:"Request Approved!"}),(0,r.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"Congratulations! Your admin request has been approved. You now have admin privileges and can access the admin dashboard."})]})]})}),(0,r.jsx)(c.$,{onClick:()=>window.location.href="/admin/dashboard",className:"w-full mt-4",children:"Go to Admin Dashboard"})]}),"REJECTED"===t.status&&(0,r.jsx)("div",{className:"border-t pt-6",children:(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-red-400 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-red-800",children:"Request Rejected"}),(0,r.jsx)("p",{className:"text-sm text-red-700 mt-1",children:"Your admin request has been rejected. Please contact support for more information."})]})]})})}),"CANCELLED"===t.status&&(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-400 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-800",children:"Request Cancelled"}),(0,r.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:"Your admin request has been cancelled. You can submit a new request if needed."})]})]})}),(0,r.jsx)(c.$,{onClick:()=>window.location.href="/register",className:"w-full mt-4",children:"Submit New Request"})]})]})]}):(0,r.jsx)(o.Zp,{children:(0,r.jsx)(o.Wu,{className:"py-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Admin Request Found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"You haven't submitted an admin request yet."}),(0,r.jsx)(c.$,{onClick:()=>window.location.href="/register",children:"Request Admin Access"})]})})})]})}),(0,r.jsx)(d.A,{})]}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please Login"}),(0,r.jsx)("p",{className:"text-gray-600",children:"You need to be logged in to view this page."})]})})}},7223:(e,s,t)=>{"use strict";t.d(s,{dj:()=>x,oR:()=>u});var r=t(12115);let a=0,l=new Map,n=e=>{if(l.has(e))return;let s=setTimeout(()=>{l.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,s)},i=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},d=[],c={toasts:[]};function o(e){c=i(c,e),d.forEach(e=>{e(c)})}function u(e){let{...s}=e,t=(a=(a+1)%Number.MAX_VALUE).toString(),r=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function x(){let[e,s]=r.useState(c);return r.useEffect(()=>(d.push(s),()=>{let e=d.indexOf(s);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var s=s=>e(e.s=s);e.O(0,[1181,6232,3081,2809,7506,4934,8455,975,8441,1517,7358],()=>s(33392)),_N_E=e.O()}]);