(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3146],{62267:(e,t,s)=>{Promise.resolve().then(s.bind(s,41390))},87364:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},32423:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},73239:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},66889:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},14807:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},57223:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},33473:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},92823:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},41390:(e,t,s)=>{"use strict";s.d(t,{default:()=>C});var a=s(95155),r=s(12115),l=s(76046),i=s(48173),n=s.n(i),c=s(47548),o=s(4370),d=s(73312),x=s(22130),h=s(25121),m=s(17146),u=s(98470),y=s(56345),g=s(71714),p=s(73239),f=s(87364),j=s(32423),v=s(66889),b=s(57223),k=s(14807);let N=(0,s(67401).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var A=s(92823),w=s(33473),E=s(7223);function C(){let e=(0,l.useParams)(),t=(0,l.useRouter)(),{user:s}=(0,m.A)(),{events:i,loading:C}=(0,u.L)(),{addBooking:S}=(0,y.W)(),[T,M]=(0,r.useState)(null),[B,D]=(0,r.useState)(1),[P,_]=(0,r.useState)(!1),[O,F]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(e.id&&i){let t=i.find(t=>t.id===e.id);t&&M(t)}},[e.id,i]);let I=e=>{e?D(e=>Math.min(e+1,10)):D(e=>Math.max(e-1,1))},$=T?T.price*B:0,L=async()=>{if(s&&T){_(!0);try{for(let e=0;e<B;e++)await S(T.id);F(!0),(0,E.oR)({title:"Booking Successful!",description:"You've successfully booked ".concat(B," ticket(s) for ").concat(T.title)}),setTimeout(()=>{t.push("/customer/bookings")},2e3)}catch(e){console.error("Booking error:",e),(0,E.oR)({title:"Booking Failed",description:"There was an error processing your booking. Please try again.",variant:"destructive"})}finally{_(!1)}}};return C?(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,a.jsx)(c.A,{}),(0,a.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8",children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(g.P.div,{className:"w-12 h-12 border-4 border-t-[#6CDAEC] rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})})}),(0,a.jsx)(o.A,{})]}):T?O?(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,a.jsx)(c.A,{}),(0,a.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(g.P.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300,damping:20},children:(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(p.A,{className:"h-8 w-8 text-green-600"})})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Booking Successful!"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["You've successfully booked ",B," ticket(s) for ",T.title]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Redirecting to your bookings..."})]})}),(0,a.jsx)(o.A,{})]}):(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,a.jsx)(c.A,{}),(0,a.jsxs)("main",{className:"flex-grow container mx-auto px-4 py-8",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(n(),{href:"/customer/dashboard",children:(0,a.jsxs)(d.$,{variant:"outline",size:"sm",className:"flex items-center",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsx)(g.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:(0,a.jsxs)(x.Zp,{className:"overflow-hidden border border-gray-200 shadow-sm",children:[(0,a.jsxs)("div",{className:"relative h-64",children:[(0,a.jsx)("img",{src:T.image_url||"https://via.placeholder.com/600x300?text=Event",alt:T.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/600x300?text=Event"}}),T.category&&(0,a.jsx)("div",{className:"absolute top-4 left-4",children:(0,a.jsx)(h.E,{className:"bg-[#6CDAEC] text-white",children:T.category.name})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:T.title}),(0,a.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,a.jsx)(j.A,{className:"h-5 w-5 mr-3 text-[#6CDAEC]"}),(0,a.jsx)("span",{children:new Date(T.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,a.jsx)(v.A,{className:"h-5 w-5 mr-3 text-[#6CDAEC]"}),(0,a.jsx)("span",{children:T.time})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,a.jsx)(b.A,{className:"h-5 w-5 mr-3 text-[#6CDAEC]"}),(0,a.jsx)("span",{children:T.location})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,a.jsx)(k.A,{className:"h-5 w-5 mr-3 text-[#6CDAEC]"}),(0,a.jsxs)("span",{children:["$",T.price," per ticket"]})]})]}),T.description&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"About This Event"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed",children:T.description})]})]})]})}),(0,a.jsx)(g.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:(0,a.jsxs)(x.Zp,{className:"p-6 border border-gray-200 shadow-sm",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Book Your Tickets"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Number of Tickets"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>I(!1),disabled:B<=1,className:"w-10 h-10 p-0",children:(0,a.jsx)(N,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(A.A,{className:"h-5 w-5 text-[#6CDAEC]"}),(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:B})]}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>I(!0),disabled:B>=10,className:"w-10 h-10 p-0",children:(0,a.jsx)(w.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum 10 tickets per booking"})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Price Breakdown"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Price per ticket:"}),(0,a.jsxs)("span",{children:["$",T.price]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Number of tickets:"}),(0,a.jsx)("span",{children:B})]}),(0,a.jsxs)("div",{className:"border-t pt-2 flex justify-between font-semibold",children:[(0,a.jsx)("span",{children:"Total:"}),(0,a.jsxs)("span",{className:"text-lg text-[#6CDAEC]",children:["$",$]})]})]})]}),(0,a.jsx)(d.$,{onClick:L,disabled:P,className:"w-full bg-[#6CDAEC] hover:bg-[#5BC8D9] text-white py-3",children:P?(0,a.jsx)(g.P.div,{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}):"Book ".concat(B," Ticket").concat(B>1?"s":""," - $").concat($)}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-3 text-center",children:"By booking, you agree to our terms and conditions"})]})})]})]}),(0,a.jsx)(o.A,{})]}):(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,a.jsx)(c.A,{}),(0,a.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Event Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"The event you're looking for doesn't exist or has been removed."}),(0,a.jsx)(n(),{href:"/customer/dashboard",children:(0,a.jsx)(d.$,{children:"Back to Dashboard"})})]})}),(0,a.jsx)(o.A,{})]})}},7223:(e,t,s)=>{"use strict";s.d(t,{dj:()=>h,oR:()=>x});var a=s(12115);let r=0,l=new Map,i=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=n(o,e),c.forEach(e=>{e(o)})}function x(e){let{...t}=e,s=(r=(r+1)%Number.MAX_VALUE).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function h(){let[e,t]=a.useState(o);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:x,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},56345:(e,t,s)=>{"use strict";s.d(t,{BookingProvider:()=>n,W:()=>c});var a=s(95155),r=s(12115),l=s(85534);let i=(0,r.createContext)(void 0),n=e=>{let{children:t}=e,[s,n]=(0,r.useState)([]),[c,o]=(0,r.useState)(!0),[d,x]=(0,r.useState)(null),h=async()=>{try{o(!0),x(null);let e=await l.Bn.getAllBookings();n(e||[])}catch(e){console.error("Error fetching bookings:",e),x(e.message||"Failed to fetch bookings")}finally{o(!1)}};(0,r.useEffect)(()=>{h()},[]);let m=async e=>{try{o(!0),x(null);let t=await l.Bn.createBooking(e);return t&&n(e=>[...e,t]),t}catch(e){return console.error("Error adding booking:",e),x(e.message||"Failed to add booking"),null}finally{o(!1)}},u=async e=>{try{o(!0),x(null);let t=await l.Bn.cancelBooking(e);return t&&n(t=>t.map(t=>t.id===e?{...t,status:"CANCELLED"}:t)),t}catch(e){return console.error("Error cancelling booking:",e),x(e.message||"Failed to cancel booking"),null}finally{o(!1)}},y=async()=>{try{return o(!0),x(null),await l.Bn.getUserBookings()||[]}catch(e){return console.error("Error getting user bookings:",e),x(e.message||"Failed to get user bookings"),[]}finally{o(!1)}},g=async()=>{try{return o(!0),x(null),await l.Bn.getAllBookings()||[]}catch(e){return console.error("Error getting all bookings:",e),x(e.message||"Failed to get all bookings"),[]}finally{o(!1)}};return(0,a.jsx)(i.Provider,{value:{bookings:s,loading:c,error:d,addBooking:m,cancelBooking:u,getUserBookings:y,getAllBookings:g,fetchBookings:h},children:t})},c=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useBookings must be used within a BookingProvider");return e}},98470:(e,t,s)=>{"use strict";s.d(t,{EventProvider:()=>n,L:()=>c});var a=s(95155),r=s(12115),l=s(85534);let i=(0,r.createContext)(void 0),n=e=>{let{children:t}=e,[s,n]=(0,r.useState)([]),[c,o]=(0,r.useState)(!0),[d,x]=(0,r.useState)(null),h=async()=>{try{o(!0),x(null);let e=await l.MT.getAllEvents();n(e||[])}catch(e){console.error("Error fetching events:",e),x(e.message||"Failed to fetch events")}finally{o(!1)}};(0,r.useEffect)(()=>{h()},[]);let m=async e=>{try{o(!0),x(null);let t=await l.MT.createEvent(e);return t&&n(e=>[...e,t]),t}catch(e){return console.error("Error adding event:",e),x(e.message||"Failed to add event"),null}finally{o(!1)}},u=async(e,t)=>{try{o(!0),x(null);let s=await l.MT.updateEvent(e,t);return s&&n(t=>t.map(t=>t.id===e?{...t,...s}:t)),s}catch(e){return console.error("Error updating event:",e),x(e.message||"Failed to update event"),null}finally{o(!1)}},y=async e=>{try{o(!0),x(null);let t=await l.MT.deleteEvent(e);return t.success&&n(t=>t.filter(t=>t.id!==e)),t.success}catch(e){return console.error("Error deleting event:",e),x(e.message||"Failed to delete event"),!1}finally{o(!1)}};return(0,a.jsx)(i.Provider,{value:{events:s,loading:c,error:d,addEvent:m,updateEvent:u,deleteEvent:y,fetchEvents:h},children:t})},c=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useEvents must be used within an EventProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[1181,6232,3081,2809,7506,4934,8455,975,5534,8441,1517,7358],()=>t(62267)),_N_E=e.O()}]);