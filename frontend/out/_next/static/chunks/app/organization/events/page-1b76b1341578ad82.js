(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7872],{38210:(e,t,r)=>{Promise.resolve().then(r.bind(r,36422))},67401:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(12115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:r,strokeWidth:o?24*Number(i)/Number(s):i,className:n("lucide",c),...m},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:o,...c}=r;return(0,a.createElement)(i,{ref:l,iconNode:t,className:n("lucide-".concat(s(e)),o),...c})});return r.displayName="".concat(e),r}},32423:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},98867:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},66889:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},57223:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},33473:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},20853:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},92823:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},76046:(e,t,r)=>{"use strict";var a=r(66658);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},36422:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var a=r(95155),s=r(12115),n=r(76046),l=r(73312),i=r(33900),o=r(22130),c=r(25121),d=r(37528),u=r(7223),m=r(67427),p=r(33473),g=r(20853),f=r(32423),h=r(67401);let x=(0,h.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),v=(0,h.A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var y=r(66889),b=r(57223),j=r(92823),w=r(39569),N=r(63936),_=r(11712);function C(){let e=(0,n.useRouter)(),{organization:t,orgLoading:r}=(0,w.rq)(),{canCreateEvents:h,isLoadingPermissions:C}=(0,w.Xn)(),{categories:A}=(0,N.C)(),{toast:E}=(0,u.dj)(),[k,S]=(0,s.useState)([]),[R,T]=(0,s.useState)([]),[I,O]=(0,s.useState)(!0),[M,z]=(0,s.useState)(""),[D,P]=(0,s.useState)("all"),[L,U]=(0,s.useState)("all"),[q,F]=(0,s.useState)("all");(0,s.useEffect)(()=>{(async()=>{if(null==t?void 0:t.id)try{O(!0);let{data:e,error:r}=await _.ND.rpc("get_organization_events",{p_organization_id:t.id});if(r)throw r;S(e||[])}catch(e){console.error("Error fetching events:",e),E({title:"Error",description:"Failed to load organization events",variant:"destructive"})}finally{O(!1)}})()},[null==t?void 0:t.id,E]),(0,s.useEffect)(()=>{(async()=>{if(null==t?void 0:t.id)try{let{data:e,error:r}=await _.ND.from("event_spaces").select("id, name, slug").eq("organization_id",t.id).order("name");if(r)throw r;T(e||[])}catch(e){console.error("Error fetching event spaces:",e)}})()},[null==t?void 0:t.id]);let V=k.filter(e=>{let t=e.title.toLowerCase().includes(M.toLowerCase())||e.description.toLowerCase().includes(M.toLowerCase()),r="all"===D||e.event_space_name===D,a="all"===L||e.category_name===L,s="all"===q||"approved"===q&&e.is_approved||"pending"===q&&!e.is_approved||"public"===q&&e.is_public||"private"===q&&!e.is_public;return t&&r&&a&&s}),W=e=>e.is_approved?e.is_public?{label:"Public",color:"green"}:{label:"Private",color:"blue"}:{label:"Pending",color:"yellow"},Z=e=>{try{let t;if(t=new Date(e.includes("T")||e.includes(" ")?e:e+"T00:00:00"),isNaN(t.getTime()))return"Invalid Date";return t.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}catch(t){return console.error("Error formatting date:",t,e),"Invalid Date"}},$=e=>{try{let t;if(t=new Date(e.includes(":")?"2000-01-01T".concat(e):e),isNaN(t.getTime()))return"Invalid Time";return t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch(t){return console.error("Error formatting time:",t,e),"Invalid Time"}};return r||C?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-t-primary rounded-full animate-spin"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Loading..."})]})}):t?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Organization Events"}),(0,a.jsxs)("p",{className:"text-gray-600 mt-2",children:["Manage events for ",t.name]})]}),h&&(0,a.jsx)(m.Wq,{children:(0,a.jsxs)(l.$,{onClick:()=>e.push("/organization/create-event"),className:"bg-primary hover:bg-primary/90 text-white",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Create Event"]})},"create-event-header")]}),(0,a.jsx)(o.Zp,{className:"mb-6",children:(0,a.jsx)(o.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.A,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),(0,a.jsx)(i.p,{placeholder:"Search events...",value:M,onChange:e=>z(e.target.value),className:"pl-10 bg-white"})]}),(0,a.jsxs)(d.l6,{value:D,onValueChange:P,children:[(0,a.jsx)(d.bq,{className:"bg-white",children:(0,a.jsx)(d.yv,{placeholder:"All spaces"})}),(0,a.jsxs)(d.gC,{children:[(0,a.jsx)(d.eb,{value:"all",children:"All Spaces"}),R.map(e=>(0,a.jsx)(d.eb,{value:e.name,children:e.name},e.id))]})]}),(0,a.jsxs)(d.l6,{value:L,onValueChange:U,children:[(0,a.jsx)(d.bq,{className:"bg-white",children:(0,a.jsx)(d.yv,{placeholder:"All categories"})}),(0,a.jsxs)(d.gC,{children:[(0,a.jsx)(d.eb,{value:"all",children:"All Categories"}),null==A?void 0:A.map(e=>(0,a.jsx)(d.eb,{value:e.name,children:e.name},e.id))]})]}),(0,a.jsxs)(d.l6,{value:q,onValueChange:F,children:[(0,a.jsx)(d.bq,{className:"bg-white",children:(0,a.jsx)(d.yv,{placeholder:"All status"})}),(0,a.jsxs)(d.gC,{children:[(0,a.jsx)(d.eb,{value:"all",children:"All Status"}),(0,a.jsx)(d.eb,{value:"approved",children:"Approved"}),(0,a.jsx)(d.eb,{value:"pending",children:"Pending Approval"}),(0,a.jsx)(d.eb,{value:"public",children:"Public"}),(0,a.jsx)(d.eb,{value:"private",children:"Private"})]})]})]})})}),I?(0,a.jsx)(s.Fragment,{children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-t-primary rounded-full animate-spin"})})},"loading"):0===V.length?(0,a.jsx)(s.Fragment,{children:(0,a.jsx)(o.Zp,{children:(0,a.jsxs)(o.Wu,{className:"flex flex-col items-center justify-center py-12",children:[(0,a.jsx)(f.A,{className:"w-16 h-16 text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No events found"}),(0,a.jsx)("p",{className:"text-gray-600 text-center mb-6",children:0===k.length?"Your organization hasn't created any events yet.":"No events match your current filters."}),h&&0===k.length&&(0,a.jsxs)(l.$,{onClick:()=>e.push("/organization/create-event"),className:"bg-primary hover:bg-primary/90 text-white",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Create Your First Event"]})]})})},"empty"):(0,a.jsx)(s.Fragment,{children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:V.map(t=>{let r=W(t);return(0,a.jsx)(m.Wq,{children:(0,a.jsxs)(o.Zp,{className:"overflow-hidden cursor-pointer h-full",onClick:()=>e.push("/events/".concat(t.event_id)),children:[(0,a.jsxs)("div",{className:"relative h-48 bg-gray-200",children:[t.image_url?(0,a.jsx)("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover"},"img-".concat(t.event_id)):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(f.A,{className:"w-16 h-16 text-gray-400"})},"placeholder-".concat(t.event_id)),(0,a.jsx)("div",{className:"absolute top-3 right-3",children:(0,a.jsx)(c.E,{variant:"green"===r.color?"default":"secondary",className:"\n                            ".concat("green"===r.color?"bg-green-100 text-green-800":"","\n                            ").concat("yellow"===r.color?"bg-yellow-100 text-yellow-800":"","\n                            ").concat("blue"===r.color?"bg-blue-100 text-blue-800":"","\n                          "),children:r.label})}),(0,a.jsx)("div",{className:"absolute top-3 left-3",children:t.is_public?(0,a.jsx)(x,{className:"w-4 h-4 text-white bg-black bg-opacity-50 rounded p-0.5"},"eye-".concat(t.event_id)):(0,a.jsx)(v,{className:"w-4 h-4 text-white bg-black bg-opacity-50 rounded p-0.5"},"eye-off-".concat(t.event_id))})]}),(0,a.jsxs)(o.Wu,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:t.title}),t.requires_approval&&(0,a.jsx)(y.A,{className:"w-4 h-4 text-yellow-500 ml-2 flex-shrink-0"},"clock-".concat(t.event_id))]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:t.description}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(f.A,{className:"w-4 h-4 mr-2"}),Z(t.event_date)," at ",$(t.event_time)]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(b.A,{className:"w-4 h-4 mr-2"}),t.location]}),t.total_bookings>0&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 mr-2"}),t.total_bookings," registered",t.max_attendees&&(0,a.jsxs)("span",{children:[" / ",t.max_attendees," max"]},"max-attendees-".concat(t.event_id))]},"bookings-".concat(t.event_id))]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:t.event_space_name&&(0,a.jsxs)("span",{children:["In ",t.event_space_name]},"space-".concat(t.event_id))}),(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:t.price>0?"$".concat(t.price):"Free"})]})]})]})},t.event_id)})})},"events")]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Organization Required"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to be part of an organization to view events."}),(0,a.jsx)(l.$,{onClick:()=>e.push("/create-organization"),children:"Create Organization"})]})})}},25121:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var a=r(95155);r(12115);var s=r(31027),n=r(21567);let l=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(l({variant:r}),t),...s})}},73312:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(95155),s=r(12115),n=r(12317),l=r(31027),i=r(21567);let o=(0,l.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:s,size:l,className:r})),ref:t,...d})});c.displayName="Button"},22130:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>l,aR:()=>i,wL:()=>u});var a=r(95155),s=r(12115),n=r(21567);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},67427:(e,t,r)=>{"use strict";r.d(t,{BN:()=>o,Wq:()=>l});var a=r(95155),s=r(12115),n=r(21567);function l(e){let{children:t,className:r,shadowColor:l="rgba(59,130,246,0.25)",shadowIntensity:i=.15,shadowSize:o=40,blurRadius:c=32,spreadRadius:d=0,transitionDuration:u=300,hoverScale:m=1.02,hoverLift:p=-5,disabled:g=!1}=e,[f,h]=(0,s.useState)(!1),x=(0,s.useRef)(null);return(0,a.jsx)("div",{ref:x,className:(0,n.cn)("relative transition-all duration-300 ease-in-out",r),style:f?{boxShadow:"0 ".concat(o,"px ").concat(c,"px ").concat(l,", 0 ").concat(2*o,"px ").concat(2*c,"px rgba(0,0,0,0.15)"),transform:"scale(".concat(m,") translateY(").concat(p,"px)"),transition:"all ".concat(u,"ms ease-in-out")}:{boxShadow:"0 8px ".concat(c,"px ").concat(l.replace("0.25",i.toString()),", 0 16px ").concat(2*c,"px rgba(0,0,0,0.1)"),transform:"scale(1) translateY(0px)",transition:"all ".concat(u,"ms ease-in-out")},onMouseEnter:()=>{g||h(!0)},onMouseLeave:()=>{g||h(!1)},children:t})}let i={blue:{shadowColor:"rgba(59,130,246,0.25)",shadowIntensity:.15},purple:{shadowColor:"rgba(168,85,247,0.25)",shadowIntensity:.15},green:{shadowColor:"rgba(34,197,94,0.25)",shadowIntensity:.15},cyan:{shadowColor:"rgba(6,182,212,0.25)",shadowIntensity:.15},red:{shadowColor:"rgba(239,68,68,0.25)",shadowIntensity:.15},orange:{shadowColor:"rgba(249,115,22,0.25)",shadowIntensity:.15},yellow:{shadowColor:"rgba(234,179,8,0.25)",shadowIntensity:.15},pink:{shadowColor:"rgba(236,72,153,0.25)",shadowIntensity:.15}};function o(e){let{children:t,theme:r="blue",className:s,...o}=e,c=i[r];return(0,a.jsx)(l,{className:(0,n.cn)("bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer",s),shadowColor:c.shadowColor,shadowIntensity:c.shadowIntensity,...o,children:t})}},33900:(e,t,r)=>{"use strict";r.d(t,{p:()=>l});var a=r(95155),s=r(12115),n=r(21567);let l=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});l.displayName="Input"},37528:(e,t,r)=>{"use strict";r.d(t,{bq:()=>u,eb:()=>p,gC:()=>m,l6:()=>c,yv:()=>d});var a=r(95155),s=r(12115),n=r(64605),l=r(51719),i=r(98867),o=r(21567);let c=n.bL;n.YJ;let d=n.WT,u=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,a.jsxs)(n.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...i,children:[s,(0,a.jsx)(n.In,{asChild:!0,children:(0,a.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=n.l9.displayName;let m=s.forwardRef((e,t)=>{let{className:r,children:s,position:l="popper",...i}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsx)(n.UC,{ref:t,className:(0,o.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===l&&"translate-y-1",r),position:l,...i,children:(0,a.jsx)(n.LM,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})})});m.displayName=n.UC.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})}).displayName=n.JU.displayName;let p=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(n.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})}),(0,a.jsx)(n.p4,{children:s})]})});p.displayName=n.q7.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=n.wv.displayName},7223:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m,oR:()=>u});var a=r(12115);let s=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?l(r):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=i(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_VALUE).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=a.useState(c);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},63936:(e,t,r)=>{"use strict";r.d(t,{C:()=>o,CategoryProvider:()=>i});var a=r(95155),s=r(12115),n=r(85534);let l=(0,s.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,s.useState)([]),[o,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(null),m=async()=>{try{c(!0),u(null);let e=await n.fm.getAllCategories();i(e||[])}catch(e){console.error("Error fetching categories:",e),u(e.message||"Failed to fetch categories")}finally{c(!1)}};(0,s.useEffect)(()=>{m()},[]);let p=async e=>{try{c(!0),u(null);let t=await n.fm.createCategory(e);return t&&i(e=>[...e,t]),t}catch(e){return console.error("Error adding category:",e),u(e.message||"Failed to add category"),null}finally{c(!1)}},g=async(e,t)=>{try{c(!0),u(null);let r=await n.fm.updateCategory(e,t);return r&&i(t=>t.map(t=>t.id===e?{...t,...r}:t)),r}catch(e){return console.error("Error updating category:",e),u(e.message||"Failed to update category"),null}finally{c(!1)}},f=async e=>{try{c(!0),u(null);let t=await n.fm.deleteCategory(e);return t.success&&i(t=>t.filter(t=>t.id!==e)),t.success}catch(e){return console.error("Error deleting category:",e),u(e.message||"Failed to delete category"),!1}finally{c(!1)}};return(0,a.jsx)(l.Provider,{value:{categories:r,loading:o,error:d,addCategory:p,updateCategory:g,deleteCategory:f,fetchCategories:m},children:t})},o=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useCategories must be used within a CategoryProvider");return e}},39569:(e,t,r)=>{"use strict";r.d(t,{Tx:()=>o,Xn:()=>i,rq:()=>l});var a=r(12115),s=r(17146),n=r(47767);let l=()=>{let{user:e,isLoading:t}=(0,s.A)(),{loadOrganization:r,loadOrganizationById:l,organization:i,isLoading:o,error:c,updateOrganization:d}=(0,n.Z)();return(0,a.useEffect)(()=>{!t&&(null==e?void 0:e.organization_id)&&!i?(console.log("Loading organization directly by ID:",e.organization_id),l(e.organization_id)):t||null==e||!e.id||(null==e?void 0:e.organization_id)||i||(console.log("Loading organization via user lookup for user:",e.id),r(e.id))},[null==e?void 0:e.id,null==e?void 0:e.organization_id,t,i,r,l]),{organization:i,orgLoading:t||o,error:c,hasOrganization:!!i,isOrganizationOwner:(null==i?void 0:i.created_by)===(null==e?void 0:e.id),isOrganizationAdmin:(null==e?void 0:e.is_org_admin)||!1,userRoleInOrg:(null==e?void 0:e.role_in_org)||"USER",updateOrganization:d}},i=()=>{let{user:e,isLoading:t}=(0,s.A)(),{organization:r,isLoading:a}=(0,n.Z)(),l=(null==r?void 0:r.created_by)===(null==e?void 0:e.id),i=(null==e?void 0:e.is_org_admin)||!1,o=(null==e?void 0:e.role_in_org)==="USER",c=!!r;return{isOwner:l,isAdmin:i,isUser:o,hasOrganization:c,isLoadingPermissions:t||a,canManageMembers:l||i,canManageEventSpaces:l||i,canManageOrganization:l,canCreateEvents:c,canInviteUsers:l||i,canRemoveUsers:l,canUpdateUserRoles:l}},o=()=>{let{organization:e}=(0,n.Z)();if(!e)return{plan:"FREE",status:"ACTIVE",isActive:!0,isSuspended:!1,isCancelled:!1,isExpired:!1,canUpgrade:!1,canDowngrade:!1,daysUntilExpiry:null};let t="ACTIVE"===e.subscription_status,r="SUSPENDED"===e.subscription_status,a="CANCELLED"===e.subscription_status,s="EXPIRED"===e.subscription_status,l="ENTERPRISE"!==e.subscription_plan,i="FREE"!==e.subscription_plan,o=null;if(e.subscription_end_date){let t=new Date(e.subscription_end_date),r=new Date;o=Math.ceil((t.getTime()-r.getTime())/864e5)}return{plan:e.subscription_plan,status:e.subscription_status,isActive:t,isSuspended:r,isCancelled:a,isExpired:s,canUpgrade:l,canDowngrade:i,daysUntilExpiry:o}}},88068:(e,t,r)=>{"use strict";r.d(t,{s:()=>l,t:()=>n});var a=r(12115);function s(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function n(...e){return t=>{let r=!1,a=e.map(e=>{let a=s(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():s(e[t],null)}}}}function l(...e){return a.useCallback(n(...e),e)}},12317:(e,t,r)=>{"use strict";r.d(t,{DX:()=>l});var a=r(12115),s=r(88068),n=r(95155),l=a.forwardRef((e,t)=>{let{children:r,...s}=e,l=a.Children.toArray(r),o=l.find(c);if(o){let e=o.props.children,r=l.map(t=>t!==o?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,n.jsx)(i,{...s,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,r):null})}return(0,n.jsx)(i,{...s,ref:t,children:r})});l.displayName="Slot";var i=a.forwardRef((e,t)=>{let{children:r,...n}=e;if(a.isValidElement(r)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(r);return a.cloneElement(r,{...function(e,t){let r={...t};for(let a in t){let s=e[a],n=t[a];/^on[A-Z]/.test(a)?s&&n?r[a]=(...e)=>{n(...e),s(...e)}:s&&(r[a]=s):"style"===a?r[a]={...s,...n}:"className"===a&&(r[a]=[s,n].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props),ref:t?(0,s.t)(t,e):e})}return a.Children.count(r)>1?a.Children.only(null):null});i.displayName="SlotClone";var o=({children:e})=>(0,n.jsx)(n.Fragment,{children:e});function c(e){return a.isValidElement(e)&&e.type===o}},31027:(e,t,r)=>{"use strict";r.d(t,{F:()=>l});var a=r(43463);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=a.$,l=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:l,defaultVariants:i}=t,o=Object.keys(l).map(e=>{let t=null==r?void 0:r[e],a=null==i?void 0:i[e];if(null===t)return null;let n=s(t)||s(a);return l[e][n]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return n(e,o,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:r,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...c}[t]):({...i,...c})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},e=>{var t=t=>e(e.s=t);e.O(0,[1181,6232,8472,5775,4934,5534,8441,1517,7358],()=>t(38210)),_N_E=e.O()}]);